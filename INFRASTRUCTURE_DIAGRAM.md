# Legacy Application Modernization Platform - Infrastructure Diagram

## Executive Overview

This document provides a comprehensive infrastructure diagram for the **Legacy Application Modernization Platform** - an AI-powered ecosystem designed to analyze legacy code, generate modernization recommendations, and facilitate containerization and CI/CD integration.

---

## High-Level Architecture Diagram

```
┌─────────────────────────────────────────────────────────────────────────────────────────────────────────────┐
│                                    LEGACY APPLICATION MODERNIZATION PLATFORM                                 │
│                                         Infrastructure Overview                                              │
└─────────────────────────────────────────────────────────────────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────────────────────────────────────────────────────────────────┐
│                                              EXTERNAL ACCESS LAYER                                          │
├─────────────────────────────────────────────────────────────────────────────────────────────────────────────┤
│                                                                                                             │
│   ┌──────────────┐    ┌──────────────┐    ┌──────────────┐    ┌──────────────┐    ┌──────────────┐         │
│   │   Port 8002  │    │   Port 3000  │    │   Port 9002  │    │   Port 8081  │    │   Port 8090  │         │
│   │   FastAPI    │    │   Grafana    │    │  SonarQube   │    │    Nexus     │    │    Plane     │         │
│   │     API      │    │  Dashboards  │    │   Analysis   │    │   Registry   │    │   Tickets    │         │
│   └──────┬───────┘    └──────┬───────┘    └──────┬───────┘    └──────┬───────┘    └──────┬───────┘         │
│          │                   │                   │                   │                   │                  │
└──────────┼───────────────────┼───────────────────┼───────────────────┼───────────────────┼──────────────────┘
           │                   │                   │                   │                   │
           ▼                   ▼                   ▼                   ▼                   ▼
┌─────────────────────────────────────────────────────────────────────────────────────────────────────────────┐
│                                           DOCKER BRIDGE NETWORKS                                            │
│   ┌─────────────────────┐  ┌─────────────────────┐  ┌─────────────────────┐  ┌─────────────────────┐       │
│   │ modernization-network│  │  monitoring-network │  │   ai-platform-net   │  │    ticketing-net    │       │
│   └─────────────────────┘  └─────────────────────┘  └─────────────────────┘  └─────────────────────┘       │
└─────────────────────────────────────────────────────────────────────────────────────────────────────────────┘
```

---

## Detailed Component Architecture

### 1. Core Application Layer

```
┌─────────────────────────────────────────────────────────────────────────────────────────────────────────────┐
│                                          CORE APPLICATION LAYER                                             │
├─────────────────────────────────────────────────────────────────────────────────────────────────────────────┤
│                                                                                                             │
│  ┌─────────────────────────────────────────────────────────────────────────────────────────────────────┐   │
│  │                              LEGACY MODERNIZATION API (FastAPI)                                      │   │
│  │                                      Container Port: 8000                                            │   │
│  │                                      External Port: 8002                                             │   │
│  ├─────────────────────────────────────────────────────────────────────────────────────────────────────┤   │
│  │                                                                                                      │   │
│  │   ┌─────────────────────┐    ┌─────────────────────┐    ┌─────────────────────┐                     │   │
│  │   │    API Endpoints    │    │   Analysis Engine   │    │   Health Checks     │                     │   │
│  │   ├─────────────────────┤    ├─────────────────────┤    ├─────────────────────┤                     │   │
│  │   │ POST /analysis/start│    │ • Code Parsing      │    │ GET /health         │                     │   │
│  │   │ GET  /analysis/{id} │    │ • Pattern Detection │    │ GET /health/ready   │                     │   │
│  │   │ GET  /analysis      │    │ • Recommendation    │    │ GET /health/live    │                     │   │
│  │   └─────────────────────┘    └─────────────────────┘    └─────────────────────┘                     │   │
│  │                                                                                                      │   │
│  │   ┌─────────────────────────────────────────────────────────────────────────────────────────────┐   │   │
│  │   │                                    TECHNOLOGY STACK                                          │   │   │
│  │   │  • Python 3.11      • FastAPI 0.109.0    • Pydantic 2.5.3    • SQLAlchemy 2.0.25           │   │   │
│  │   │  • Uvicorn (ASGI)   • HTTPx              • python-jose       • passlib (auth)               │   │   │
│  │   └─────────────────────────────────────────────────────────────────────────────────────────────┘   │   │
│  └─────────────────────────────────────────────────────────────────────────────────────────────────────┘   │
│                                                                                                             │
│  ┌─────────────────────────────────────────────────────────────────────────────────────────────────────┐   │
│  │                                RAG AI GENERATOR SERVICE                                              │   │
│  │                                      Port: 8080                                                      │   │
│  ├─────────────────────────────────────────────────────────────────────────────────────────────────────┤   │
│  │                                                                                                      │   │
│  │   ┌─────────────────────┐    ┌─────────────────────┐    ┌─────────────────────┐                     │   │
│  │   │  Generation APIs    │    │  Validation APIs    │    │    Template Store   │                     │   │
│  │   ├─────────────────────┤    ├─────────────────────┤    ├─────────────────────┤                     │   │
│  │   │ /generate/dockerfile│    │ /validate/dockerfile│    │ • Dockerfile TPLs   │                     │   │
│  │   │ /generate/gitlabci  │    │ /validate/gitlabci  │    │ • GitLab CI TPLs    │                     │   │
│  │   │ /catalog            │    │ Golden Rules Check  │    │ • Golden Rules      │                     │   │
│  │   └─────────────────────┘    └─────────────────────┘    └─────────────────────┘                     │   │
│  │                                                                                                      │   │
│  └─────────────────────────────────────────────────────────────────────────────────────────────────────┘   │
│                                                                                                             │
└─────────────────────────────────────────────────────────────────────────────────────────────────────────────┘
```

---

### 2. Data Layer Architecture

```
┌─────────────────────────────────────────────────────────────────────────────────────────────────────────────┐
│                                              DATA LAYER                                                     │
├─────────────────────────────────────────────────────────────────────────────────────────────────────────────┤
│                                                                                                             │
│  ┌────────────────────────────┐  ┌────────────────────────────┐  ┌────────────────────────────┐            │
│  │      POSTGRESQL 15         │  │         REDIS 7            │  │        CHROMADB            │            │
│  │      (Alpine Image)        │  │      (Alpine Image)        │  │    (Vector Database)       │            │
│  ├────────────────────────────┤  ├────────────────────────────┤  ├────────────────────────────┤            │
│  │                            │  │                            │  │                            │            │
│  │  Port: 5432                │  │  Port: 6379                │  │  Port: 8000                │            │
│  │  Database: modernization   │  │  Database: 0               │  │                            │            │
│  │  User: postgres            │  │                            │  │  Collections:              │            │
│  │                            │  │  Purpose:                  │  │  • templates_dockerfile    │            │
│  │  Purpose:                  │  │  • Caching                 │  │  • templates_gitlab        │            │
│  │  • Analysis Jobs           │  │  • Job Queues              │  │  • golden_rules            │            │
│  │  • Results Storage         │  │  • Session Storage         │  │                            │            │
│  │  • Metadata                │  │                            │  │  Purpose:                  │            │
│  │                            │  │  Volume:                   │  │  • RAG Embeddings          │            │
│  │  Volume:                   │  │  redis-data                │  │  • Template Retrieval      │            │
│  │  postgres-data             │  │                            │  │                            │            │
│  │                            │  │                            │  │                            │            │
│  └────────────────────────────┘  └────────────────────────────┘  └────────────────────────────┘            │
│                                                                                                             │
│  ┌────────────────────────────┐  ┌────────────────────────────┐                                            │
│  │         MINIO              │  │        MONGODB 7           │                                            │
│  │   (S3-Compatible Storage)  │  │       (Optional)           │                                            │
│  ├────────────────────────────┤  ├────────────────────────────┤                                            │
│  │                            │  │                            │                                            │
│  │  Endpoint: minio:9000      │  │  Port: 27017               │                                            │
│  │  User: minioadmin          │  │                            │                                            │
│  │  Pass: minioadmin          │  │  Purpose:                  │                                            │
│  │                            │  │  • Unstructured Data       │                                            │
│  │  Purpose:                  │  │  • Document Storage        │                                            │
│  │  • Binary Artifacts        │  │                            │                                            │
│  │  • Compiled JARs           │  │                            │                                            │
│  │  • Build Outputs           │  │                            │                                            │
│  │                            │  │                            │                                            │
│  │  Volume: minio-data        │  │                            │                                            │
│  │                            │  │                            │                                            │
│  └────────────────────────────┘  └────────────────────────────┘                                            │
│                                                                                                             │
└─────────────────────────────────────────────────────────────────────────────────────────────────────────────┘
```

---

### 3. AI/ML Services Layer

```
┌─────────────────────────────────────────────────────────────────────────────────────────────────────────────┐
│                                           AI/ML SERVICES LAYER                                              │
├─────────────────────────────────────────────────────────────────────────────────────────────────────────────┤
│                                                                                                             │
│  ┌─────────────────────────────────────────────────────────────────────────────────────────────────────┐   │
│  │                                    OLLAMA (Local LLM Inference)                                      │   │
│  │                                           Port: 11434                                                │   │
│  ├─────────────────────────────────────────────────────────────────────────────────────────────────────┤   │
│  │                                                                                                      │   │
│  │   ┌────────────────────────────────────────────────────────────────────────────────────────────┐    │   │
│  │   │                              AVAILABLE MODELS                                               │    │   │
│  │   │                                                                                             │    │   │
│  │   │   ┌─────────────────────────┐         ┌─────────────────────────┐                          │    │   │
│  │   │   │   deepseek-coder:33b   │         │   qwen2.5-coder:32b    │                          │    │   │
│  │   │   │   (33B parameters)      │         │   (32B parameters)      │                          │    │   │
│  │   │   │                         │         │                         │                          │    │   │
│  │   │   │   Use Cases:            │         │   Use Cases:            │                          │    │   │
│  │   │   │   • Code Analysis       │         │   • Code Generation     │                          │    │   │
│  │   │   │   • Pattern Detection   │         │   • Modernization Recs  │                          │    │   │
│  │   │   │   • Legacy Assessment   │         │   • Documentation       │                          │    │   │
│  │   │   └─────────────────────────┘         └─────────────────────────┘                          │    │   │
│  │   │                                                                                             │    │   │
│  │   └────────────────────────────────────────────────────────────────────────────────────────────┘    │   │
│  │                                                                                                      │   │
│  │   ┌─────────────────────────────────────────────────────────────────────────────────────────────┐   │   │
│  │   │   Volume: ollama-models    │    GPU Support: DCGM Exporter Enabled    │    API: REST       │   │   │
│  │   └─────────────────────────────────────────────────────────────────────────────────────────────┘   │   │
│  │                                                                                                      │   │
│  └─────────────────────────────────────────────────────────────────────────────────────────────────────┘   │
│                                                                                                             │
│  ┌─────────────────────────────────────────────────────────────────────────────────────────────────────┐   │
│  │                                         RAG PIPELINE                                                 │   │
│  ├─────────────────────────────────────────────────────────────────────────────────────────────────────┤   │
│  │                                                                                                      │   │
│  │   ┌─────────────┐    ┌─────────────┐    ┌─────────────┐    ┌─────────────┐    ┌─────────────┐       │   │
│  │   │   User      │───▶│  Template   │───▶│  ChromaDB   │───▶│   LLM       │───▶│  Generated  │       │   │
│  │   │   Request   │    │  Matching   │    │  Retrieval  │    │  Processing │    │  Output     │       │   │
│  │   └─────────────┘    └─────────────┘    └─────────────┘    └─────────────┘    └─────────────┘       │   │
│  │                                                                                                      │   │
│  │   Flow: Request → Embed Query → Retrieve Similar Templates → Augment Prompt → Generate → Validate   │   │
│  │                                                                                                      │   │
│  └─────────────────────────────────────────────────────────────────────────────────────────────────────┘   │
│                                                                                                             │
└─────────────────────────────────────────────────────────────────────────────────────────────────────────────┘
```

---

### 4. DevOps & CI/CD Infrastructure

```
┌─────────────────────────────────────────────────────────────────────────────────────────────────────────────┐
│                                      DEVOPS & CI/CD INFRASTRUCTURE                                          │
├─────────────────────────────────────────────────────────────────────────────────────────────────────────────┤
│                                                                                                             │
│  ┌─────────────────────────────────────────────────────────────────────────────────────────────────────┐   │
│  │                                      GITLAB CI/CD RUNNER                                             │   │
│  ├─────────────────────────────────────────────────────────────────────────────────────────────────────┤   │
│  │                                                                                                      │   │
│  │   ┌─────────────────────────────────────────────────────────────────────────────────────────────┐   │   │
│  │   │                              GITLAB RUNNER CONFIGURATION                                     │   │   │
│  │   │                                                                                              │   │   │
│  │   │   Server: http://gitlab-server          Concurrent: 3 runners                               │   │   │
│  │   │   Executor: docker                      Docker-in-Docker: Enabled                           │   │   │
│  │   │   Network: gitlab-net                   Kaniko Support: Enabled                             │   │   │
│  │   │                                                                                              │   │   │
│  │   └─────────────────────────────────────────────────────────────────────────────────────────────┘   │   │
│  │                                                                                                      │   │
│  │   ┌─────────────────────────────────────────────────────────────────────────────────────────────┐   │   │
│  │   │                                CI/CD PIPELINE STAGES                                         │   │   │
│  │   │                                                                                              │   │   │
│  │   │   ┌─────────┐   ┌─────────┐   ┌─────────┐   ┌─────────┐   ┌─────────┐   ┌─────────┐        │   │   │
│  │   │   │  BUILD  │──▶│  TEST   │──▶│  PUSH   │──▶│ DEPLOY  │──▶│ ANALYZE │──▶│SECURITY │        │   │   │
│  │   │   │         │   │         │   │         │   │         │   │         │   │         │        │   │   │
│  │   │   │ Docker  │   │ Image   │   │ Nexus   │   │Container│   │SonarQube│   │ Trivy   │        │   │   │
│  │   │   │ Build   │   │ Verify  │   │ Push    │   │ Deploy  │   │ Scan    │   │ Scan    │        │   │   │
│  │   │   └─────────┘   └─────────┘   └─────────┘   └─────────┘   └─────────┘   └─────────┘        │   │   │
│  │   │                                                                                              │   │   │
│  │   └─────────────────────────────────────────────────────────────────────────────────────────────┘   │   │
│  │                                                                                                      │   │
│  └─────────────────────────────────────────────────────────────────────────────────────────────────────┘   │
│                                                                                                             │
│  ┌──────────────────────────────────────────┐  ┌──────────────────────────────────────────┐                │
│  │           NEXUS REPOSITORY                │  │              SONARQUBE                   │                │
│  │         (Private Registry)                │  │          (Code Quality)                  │                │
│  ├──────────────────────────────────────────┤  ├──────────────────────────────────────────┤                │
│  │                                          │  │                                          │                │
│  │   UI Port: 8081                          │  │   Port: 9002                             │                │
│  │   Registry Port: 5001                    │  │                                          │                │
│  │                                          │  │   Pre-configured Projects:               │                │
│  │   Repository: apm-repo                   │  │   • legacy-banking-core                  │                │
│  │   Namespace: demo                        │  │   • legacy-insurance-policy              │                │
│  │                                          │  │   • legacy-retail-pos                    │                │
│  │   Pre-cached Images:                     │  │   • legacy-healthcare-records            │                │
│  │   • Python (3.8-3.12)                    │  │   • legacy-crm-system                    │                │
│  │   • Java (8, 11, 17, 21)                 │  │   • legacy-erp-finance                   │                │
│  │   • Node (16, 18, 20, 22)                │  │   • legacy-inventory-manager             │                │
│  │   • Maven, Gradle                        │  │   • legacy-hr-payroll                    │                │
│  │   • Infrastructure (Redis, PG, etc)      │  │   • legacy-telecom-billing               │                │
│  │                                          │  │   • ... (20 total projects)              │                │
│  │   Total: 40+ images                      │  │                                          │                │
│  │                                          │  │   Each with unique auth tokens           │                │
│  └──────────────────────────────────────────┘  └──────────────────────────────────────────┘                │
│                                                                                                             │
└─────────────────────────────────────────────────────────────────────────────────────────────────────────────┘
```

---

### 5. Monitoring & Observability Stack

```
┌─────────────────────────────────────────────────────────────────────────────────────────────────────────────┐
│                                    MONITORING & OBSERVABILITY STACK                                         │
├─────────────────────────────────────────────────────────────────────────────────────────────────────────────┤
│                                                                                                             │
│  ┌─────────────────────────────────────────────────────────────────────────────────────────────────────┐   │
│  │                                        METRICS PIPELINE                                              │   │
│  │                                                                                                      │   │
│  │   ┌─────────────┐    ┌─────────────┐    ┌─────────────┐    ┌─────────────┐                          │   │
│  │   │ Node        │    │ cAdvisor    │    │ DCGM        │    │ Ollama      │                          │   │
│  │   │ Exporter    │    │             │    │ Exporter    │    │ Metrics     │                          │   │
│  │   │ Port: 9100  │    │ Port: 8082  │    │ Port: 9400  │    │ Port: 11434 │                          │   │
│  │   │             │    │             │    │             │    │             │                          │   │
│  │   │ System      │    │ Container   │    │ GPU         │    │ LLM         │                          │   │
│  │   │ Metrics     │    │ Metrics     │    │ Metrics     │    │ Metrics     │                          │   │
│  │   └──────┬──────┘    └──────┬──────┘    └──────┬──────┘    └──────┬──────┘                          │   │
│  │          │                  │                  │                  │                                  │   │
│  │          └──────────────────┼──────────────────┼──────────────────┘                                  │   │
│  │                             │                  │                                                      │   │
│  │                             ▼                  ▼                                                      │   │
│  │                     ┌─────────────────────────────────────┐                                          │   │
│  │                     │           PROMETHEUS                │                                          │   │
│  │                     │           Port: 9090                │                                          │   │
│  │                     │                                     │                                          │   │
│  │                     │   Scrape Interval: 15s              │                                          │   │
│  │                     │   Volume: prometheus-data           │                                          │   │
│  │                     │                                     │                                          │   │
│  │                     └──────────────┬──────────────────────┘                                          │   │
│  │                                    │                                                                  │   │
│  │                                    ▼                                                                  │   │
│  │                     ┌─────────────────────────────────────┐                                          │   │
│  │                     │            GRAFANA                  │                                          │   │
│  │                     │           Port: 3000                │                                          │   │
│  │                     │                                     │                                          │   │
│  │                     │   Default: admin/admin              │                                          │   │
│  │                     │   Plugins: redis-datasource         │                                          │   │
│  │                     │   Volume: grafana-data              │                                          │   │
│  │                     │                                     │                                          │   │
│  │                     └─────────────────────────────────────┘                                          │   │
│  │                                                                                                      │   │
│  └─────────────────────────────────────────────────────────────────────────────────────────────────────┘   │
│                                                                                                             │
│  ┌───────────────────────────────────────────┐  ┌───────────────────────────────────────────┐              │
│  │              JAEGER                        │  │               LOKI                        │              │
│  │        (Distributed Tracing)               │  │          (Log Aggregation)                │              │
│  ├───────────────────────────────────────────┤  ├───────────────────────────────────────────┤              │
│  │                                           │  │                                           │              │
│  │   UI Port: 16686                          │  │   Port: 3100                              │              │
│  │   Collector Port: 14268                   │  │   Volume: loki-data                       │              │
│  │   Zipkin Port: 9411                       │  │                                           │              │
│  │                                           │  │   Purpose:                                │              │
│  │   Purpose:                                │  │   • Centralized Logging                   │              │
│  │   • Request Tracing                       │  │   • Log Queries                           │              │
│  │   • Latency Analysis                      │  │   • Alerting                              │              │
│  │   • Service Dependencies                  │  │                                           │              │
│  │                                           │  │                                           │              │
│  └───────────────────────────────────────────┘  └───────────────────────────────────────────┘              │
│                                                                                                             │
└─────────────────────────────────────────────────────────────────────────────────────────────────────────────┘
```

---

### 6. Security Infrastructure

```
┌─────────────────────────────────────────────────────────────────────────────────────────────────────────────┐
│                                         SECURITY INFRASTRUCTURE                                             │
├─────────────────────────────────────────────────────────────────────────────────────────────────────────────┤
│                                                                                                             │
│  ┌─────────────────────────────────────────────────────────────────────────────────────────────────────┐   │
│  │                                    TRIVY VULNERABILITY SCANNER                                       │   │
│  │                                          Port: 8083                                                  │   │
│  ├─────────────────────────────────────────────────────────────────────────────────────────────────────┤   │
│  │                                                                                                      │   │
│  │   Image: aquasec/trivy:latest                                                                        │   │
│  │                                                                                                      │   │
│  │   Capabilities:                                                                                      │   │
│  │   ┌───────────────────────────────────────────────────────────────────────────────────────────┐     │   │
│  │   │  • Container Image Scanning         • Filesystem Scanning                                 │     │   │
│  │   │  • Git Repository Scanning          • Kubernetes Manifest Scanning                        │     │   │
│  │   │  • SBOM Generation                  • Misconfiguration Detection                          │     │   │
│  │   │  • CVE Database Updates             • License Compliance                                  │     │   │
│  │   └───────────────────────────────────────────────────────────────────────────────────────────┘     │   │
│  │                                                                                                      │   │
│  └─────────────────────────────────────────────────────────────────────────────────────────────────────┘   │
│                                                                                                             │
│  ┌─────────────────────────────────────────────────────────────────────────────────────────────────────┐   │
│  │                                    SECURITY CONFIGURATION                                            │   │
│  ├─────────────────────────────────────────────────────────────────────────────────────────────────────┤   │
│  │                                                                                                      │   │
│  │   ┌─────────────────────┐    ┌─────────────────────┐    ┌─────────────────────┐                     │   │
│  │   │   Authentication    │    │   Network Security  │    │   Container Sec     │                     │   │
│  │   ├─────────────────────┤    ├─────────────────────┤    ├─────────────────────┤                     │   │
│  │   │ • JWT Ready         │    │ • Bridge Networks   │    │ • Non-root User     │                     │   │
│  │   │ • python-jose       │    │ • Port Isolation    │    │ • UID 1000          │                     │   │
│  │   │ • passlib (hashing) │    │ • DNS Resolution    │    │ • Read-only FS      │                     │   │
│  │   │                     │    │                     │    │ • Health Checks     │                     │   │
│  │   └─────────────────────┘    └─────────────────────┘    └─────────────────────┘                     │   │
│  │                                                                                                      │   │
│  │   ⚠️  SECURITY CONSIDERATIONS FOR PRODUCTION:                                                        │   │
│  │   ┌───────────────────────────────────────────────────────────────────────────────────────────┐     │   │
│  │   │  • CORS currently set to wildcard (*) - needs restriction                                 │     │   │
│  │   │  • Default passwords in configuration files - use secrets management                      │     │   │
│  │   │  • TLS disabled for Docker-in-Docker - enable for production                              │     │   │
│  │   │  • Insecure registries whitelisted - review for production                                │     │   │
│  │   │  • Implement HashiCorp Vault for secrets management                                       │     │   │
│  │   └───────────────────────────────────────────────────────────────────────────────────────────┘     │   │
│  │                                                                                                      │   │
│  └─────────────────────────────────────────────────────────────────────────────────────────────────────┘   │
│                                                                                                             │
└─────────────────────────────────────────────────────────────────────────────────────────────────────────────┘
```

---

### 7. Project Management & Ticketing

```
┌─────────────────────────────────────────────────────────────────────────────────────────────────────────────┐
│                                    PROJECT MANAGEMENT & TICKETING                                           │
├─────────────────────────────────────────────────────────────────────────────────────────────────────────────┤
│                                                                                                             │
│  ┌─────────────────────────────────────────────────────────────────────────────────────────────────────┐   │
│  │                                         PLANE (REDMINE)                                              │   │
│  │                                          Port: 8090                                                  │   │
│  ├─────────────────────────────────────────────────────────────────────────────────────────────────────┤   │
│  │                                                                                                      │   │
│  │   ┌─────────────────────────────────────────────────────────────────────────────────────────────┐   │   │
│  │   │                                   ARCHITECTURE                                               │   │   │
│  │   │                                                                                              │   │   │
│  │   │   ┌────────────────┐        ┌────────────────┐        ┌────────────────┐                    │   │   │
│  │   │   │   Redmine 5    │◀──────▶│  PostgreSQL    │        │    Volumes     │                    │   │   │
│  │   │   │   (Alpine)     │        │     15         │        │                │                    │   │   │
│  │   │   │                │        │                │        │ • database     │                    │   │   │
│  │   │   │  User: redmine │        │ DB: redmine    │        │ • files        │                    │   │   │
│  │   │   │  Pass: ******* │        │ User: redmine  │        │ • plugins      │                    │   │   │
│  │   │   │                │        │                │        │ • themes       │                    │   │   │
│  │   │   └────────────────┘        └────────────────┘        └────────────────┘                    │   │   │
│  │   │                                                                                              │   │   │
│  │   └─────────────────────────────────────────────────────────────────────────────────────────────┘   │   │
│  │                                                                                                      │   │
│  │   ┌─────────────────────────────────────────────────────────────────────────────────────────────┐   │   │
│  │   │                          SUPPORTED TICKETING INTEGRATIONS                                    │   │   │
│  │   │                                                                                              │   │   │
│  │   │   ┌─────────────┐  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐       │   │   │
│  │   │   │   Redmine   │  │    Jira     │  │ ServiceNow  │  │   GitLab    │  │   Generic   │       │   │   │
│  │   │   │  (Primary)  │  │ (Supported) │  │ (Supported) │  │   Issues    │  │    HTTP     │       │   │   │
│  │   │   │             │  │             │  │             │  │ (Supported) │  │  (Webhook)  │       │   │   │
│  │   │   └─────────────┘  └─────────────┘  └─────────────┘  └─────────────┘  └─────────────┘       │   │   │
│  │   │                                                                                              │   │   │
│  │   └─────────────────────────────────────────────────────────────────────────────────────────────┘   │   │
│  │                                                                                                      │   │
│  └─────────────────────────────────────────────────────────────────────────────────────────────────────┘   │
│                                                                                                             │
└─────────────────────────────────────────────────────────────────────────────────────────────────────────────┘
```

---

## Complete Network Topology

```
┌─────────────────────────────────────────────────────────────────────────────────────────────────────────────┐
│                                         NETWORK TOPOLOGY                                                    │
├─────────────────────────────────────────────────────────────────────────────────────────────────────────────┤
│                                                                                                             │
│                                        ┌─────────────────────┐                                              │
│                                        │    HOST MACHINE     │                                              │
│                                        │   (Docker Host)     │                                              │
│                                        └──────────┬──────────┘                                              │
│                                                   │                                                         │
│                              ┌────────────────────┼────────────────────┐                                    │
│                              │                    │                    │                                    │
│                              ▼                    ▼                    ▼                                    │
│  ┌───────────────────────────────────────────────────────────────────────────────────────────────────┐     │
│  │                                    DOCKER BRIDGE NETWORKS                                          │     │
│  │                                                                                                    │     │
│  │  ┌─────────────────────────────┐     ┌─────────────────────────────┐                              │     │
│  │  │   modernization-network     │     │    monitoring-network       │                              │     │
│  │  │                             │     │                             │                              │     │
│  │  │  • modernization-api        │     │  • prometheus               │                              │     │
│  │  │  • postgres                 │     │  • grafana                  │                              │     │
│  │  │  • redis                    │     │  • jaeger                   │                              │     │
│  │  │  • chromadb                 │     │  • loki                     │                              │     │
│  │  │  • ollama                   │     │  • node-exporter            │                              │     │
│  │  │  • minio                    │     │  • cadvisor                 │                              │     │
│  │  │                             │     │  • dcgm-exporter            │                              │     │
│  │  └─────────────────────────────┘     └─────────────────────────────┘                              │     │
│  │                                                                                                    │     │
│  │  ┌─────────────────────────────┐     ┌─────────────────────────────┐                              │     │
│  │  │     ai-platform-net         │     │      ticketing-net          │                              │     │
│  │  │       (External)            │     │                             │                              │     │
│  │  │                             │     │  • redmine                  │                              │     │
│  │  │  Cross-stack communication  │     │  • redmine-db               │                              │     │
│  │  │  for shared services        │     │                             │                              │     │
│  │  │                             │     │                             │                              │     │
│  │  └─────────────────────────────┘     └─────────────────────────────┘                              │     │
│  │                                                                                                    │     │
│  │  ┌─────────────────────────────┐                                                                  │     │
│  │  │       gitlab-net            │                                                                  │     │
│  │  │                             │                                                                  │     │
│  │  │  • gitlab-runner            │                                                                  │     │
│  │  │  • dind (docker-in-docker)  │                                                                  │     │
│  │  │                             │                                                                  │     │
│  │  └─────────────────────────────┘                                                                  │     │
│  │                                                                                                    │     │
│  └───────────────────────────────────────────────────────────────────────────────────────────────────┘     │
│                                                                                                             │
└─────────────────────────────────────────────────────────────────────────────────────────────────────────────┘
```

---

## Port Mapping Reference

```
┌─────────────────────────────────────────────────────────────────────────────────────────────────────────────┐
│                                          PORT MAPPING REFERENCE                                             │
├─────────────────────────────────────────────────────────────────────────────────────────────────────────────┤
│                                                                                                             │
│   ┌──────────────────────────────────────────────────────────────────────────────────────────────────┐     │
│   │                               EXTERNAL (HOST) PORTS                                               │     │
│   ├───────────────┬─────────────────────────────────────────────────────────────────────────────────┤     │
│   │    PORT       │    SERVICE                                                                       │     │
│   ├───────────────┼─────────────────────────────────────────────────────────────────────────────────┤     │
│   │    3000       │    Grafana (Dashboards & Visualization)                                          │     │
│   │    3100       │    Loki (Log Aggregation)                                                        │     │
│   │    5001       │    Nexus Docker Registry                                                         │     │
│   │    5432       │    PostgreSQL Database                                                           │     │
│   │    6379       │    Redis Cache                                                                   │     │
│   │    8000       │    ChromaDB Vector Database                                                      │     │
│   │    8002       │    FastAPI Modernization API                                                     │     │
│   │    8080       │    RAG AI Generator Service                                                      │     │
│   │    8081       │    Nexus Repository Manager UI                                                   │     │
│   │    8082       │    cAdvisor (Container Metrics)                                                  │     │
│   │    8083       │    Trivy Security Scanner                                                        │     │
│   │    8090       │    Plane/Redmine (Issue Tracking)                                                │     │
│   │    9000       │    MinIO S3 API                                                                  │     │
│   │    9002       │    SonarQube (Code Quality)                                                      │     │
│   │    9090       │    Prometheus (Metrics)                                                          │     │
│   │    9100       │    Node Exporter (System Metrics)                                                │     │
│   │    9400       │    DCGM Exporter (GPU Metrics)                                                   │     │
│   │    9411       │    Jaeger Zipkin Endpoint                                                        │     │
│   │    11434      │    Ollama LLM API                                                                │     │
│   │    14268      │    Jaeger Collector                                                              │     │
│   │    16686      │    Jaeger UI                                                                     │     │
│   │    27017      │    MongoDB (Optional)                                                            │     │
│   └───────────────┴─────────────────────────────────────────────────────────────────────────────────┘     │
│                                                                                                             │
└─────────────────────────────────────────────────────────────────────────────────────────────────────────────┘
```

---

## Data Flow Architecture

```
┌─────────────────────────────────────────────────────────────────────────────────────────────────────────────┐
│                                         DATA FLOW ARCHITECTURE                                              │
├─────────────────────────────────────────────────────────────────────────────────────────────────────────────┤
│                                                                                                             │
│                                                                                                             │
│   ┌─────────────┐                                                                                           │
│   │   Client    │                                                                                           │
│   │  (Browser/  │                                                                                           │
│   │    CLI)     │                                                                                           │
│   └──────┬──────┘                                                                                           │
│          │                                                                                                  │
│          │  HTTP Request                                                                                    │
│          ▼                                                                                                  │
│   ┌─────────────────────────────────────────────────────────────────────────────────────────────────────┐  │
│   │                                    MODERNIZATION API (FastAPI)                                       │  │
│   │                                                                                                      │  │
│   │   1. Receive Analysis Request                                                                        │  │
│   │   2. Validate Input                                                                                  │  │
│   │   3. Create Job Record                                                                               │  │
│   │                                                                                                      │  │
│   └──────┬───────────────────────────────────┬───────────────────────────────────────┬───────────────────┘  │
│          │                                   │                                       │                      │
│          │ Store Job                         │ Cache Session                         │ Analyze Code         │
│          ▼                                   ▼                                       ▼                      │
│   ┌─────────────┐                     ┌─────────────┐                         ┌─────────────┐               │
│   │ PostgreSQL  │                     │   Redis     │                         │   Ollama    │               │
│   │             │                     │             │                         │    (LLM)    │               │
│   │ • Jobs      │                     │ • Sessions  │                         │             │               │
│   │ • Results   │                     │ • Cache     │                         │ • Pattern   │               │
│   │ • Metadata  │                     │ • Queues    │                         │   Detection │               │
│   │             │                     │             │                         │ • Analysis  │               │
│   └─────────────┘                     └─────────────┘                         └──────┬──────┘               │
│                                                                                      │                      │
│                                                                                      │ Retrieve Templates   │
│                                                                                      ▼                      │
│   ┌─────────────────────────────────────────────────────────────────────────────────────────────────────┐  │
│   │                                       RAG PIPELINE                                                   │  │
│   │                                                                                                      │  │
│   │   ┌─────────────┐    ┌─────────────┐    ┌─────────────┐    ┌─────────────┐                          │  │
│   │   │  ChromaDB   │───▶│  Template   │───▶│  Augmented  │───▶│  Generated  │                          │  │
│   │   │  (Vectors)  │    │  Retrieval  │    │   Prompt    │    │  Artifacts  │                          │  │
│   │   └─────────────┘    └─────────────┘    └─────────────┘    └──────┬──────┘                          │  │
│   │                                                                   │                                  │  │
│   └───────────────────────────────────────────────────────────────────┼──────────────────────────────────┘  │
│                                                                       │                                     │
│                                                                       │ Validate & Store                    │
│                                                                       ▼                                     │
│   ┌─────────────────────────────────────────────────────────────────────────────────────────────────────┐  │
│   │                                    CI/CD PIPELINE                                                    │  │
│   │                                                                                                      │  │
│   │   ┌─────────────┐    ┌─────────────┐    ┌─────────────┐    ┌─────────────┐    ┌─────────────┐       │  │
│   │   │   GitLab    │───▶│   Build     │───▶│   Nexus     │───▶│ SonarQube   │───▶│   Trivy     │       │  │
│   │   │   Runner    │    │   Image     │    │   Push      │    │   Scan      │    │   Scan      │       │  │
│   │   └─────────────┘    └─────────────┘    └─────────────┘    └─────────────┘    └─────────────┘       │  │
│   │                                                                                                      │  │
│   └─────────────────────────────────────────────────────────────────────────────────────────────────────┘  │
│                                                                                                             │
│                              ┌─────────────────────────────────────────┐                                   │
│                              │         OBSERVABILITY LAYER            │                                   │
│                              │                                         │                                   │
│                              │  Prometheus ──▶ Grafana (Dashboards)   │                                   │
│                              │  Jaeger ──▶ Distributed Traces         │                                   │
│                              │  Loki ──▶ Centralized Logs             │                                   │
│                              │                                         │                                   │
│                              └─────────────────────────────────────────┘                                   │
│                                                                                                             │
└─────────────────────────────────────────────────────────────────────────────────────────────────────────────┘
```

---

## Technology Stack Summary

```
┌─────────────────────────────────────────────────────────────────────────────────────────────────────────────┐
│                                       TECHNOLOGY STACK SUMMARY                                              │
├─────────────────────────────────────────────────────────────────────────────────────────────────────────────┤
│                                                                                                             │
│  ┌─────────────────────────────────────────────────────────────────────────────────────────────────────┐   │
│  │                                     LANGUAGES & FRAMEWORKS                                           │   │
│  │                                                                                                      │   │
│  │   Python 3.11          Java 17               Node.js              Ruby                               │   │
│  │   ├── FastAPI          ├── Maven             ├── npm              └── Redmine                        │   │
│  │   ├── Pydantic         ├── SonarQube         └── Templates            Scripting                      │   │
│  │   ├── SQLAlchemy       └── Templates                                                                 │   │
│  │   ├── Langchain                                                                                      │   │
│  │   └── ChromaDB                                                                                       │   │
│  │                                                                                                      │   │
│  └─────────────────────────────────────────────────────────────────────────────────────────────────────┘   │
│                                                                                                             │
│  ┌─────────────────────────────────────────────────────────────────────────────────────────────────────┐   │
│  │                                        DATABASES                                                     │   │
│  │                                                                                                      │   │
│  │   ┌────────────────┐  ┌────────────────┐  ┌────────────────┐  ┌────────────────┐  ┌──────────────┐  │   │
│  │   │  PostgreSQL 15 │  │    Redis 7     │  │   ChromaDB     │  │    MinIO       │  │  MongoDB 7   │  │   │
│  │   │                │  │                │  │                │  │                │  │  (Optional)  │  │   │
│  │   │  Relational    │  │    Cache       │  │    Vector      │  │    Object      │  │  Document    │  │   │
│  │   │  Storage       │  │    Queues      │  │    Embeddings  │  │    Storage     │  │  Storage     │  │   │
│  │   └────────────────┘  └────────────────┘  └────────────────┘  └────────────────┘  └──────────────┘  │   │
│  │                                                                                                      │   │
│  └─────────────────────────────────────────────────────────────────────────────────────────────────────┘   │
│                                                                                                             │
│  ┌─────────────────────────────────────────────────────────────────────────────────────────────────────┐   │
│  │                                    CONTAINERS & ORCHESTRATION                                        │   │
│  │                                                                                                      │   │
│  │   Docker 24                Docker Compose              Kaniko                  Kubernetes-Ready      │   │
│  │   ├── Docker CLI           ├── Stack Definition        └── Multi-platform     ├── Health Probes     │   │
│  │   └── Docker-in-Docker     └── Service Discovery           Build              └── Resource Limits   │   │
│  │                                                                                                      │   │
│  └─────────────────────────────────────────────────────────────────────────────────────────────────────┘   │
│                                                                                                             │
│  ┌─────────────────────────────────────────────────────────────────────────────────────────────────────┐   │
│  │                                        AI/ML STACK                                                   │   │
│  │                                                                                                      │   │
│  │   Ollama (Local LLM)           Langchain                ChromaDB (RAG)           GPU Support         │   │
│  │   ├── deepseek-coder:33b       ├── Orchestration        ├── Vector Store         ├── DCGM Exporter   │   │
│  │   └── qwen2.5-coder:32b        └── Chain Management     └── Similarity Search    └── CUDA Ready      │   │
│  │                                                                                                      │   │
│  └─────────────────────────────────────────────────────────────────────────────────────────────────────┘   │
│                                                                                                             │
│  ┌─────────────────────────────────────────────────────────────────────────────────────────────────────┐   │
│  │                                         DEVOPS TOOLS                                                 │   │
│  │                                                                                                      │   │
│  │   GitLab CI/CD             Nexus                    SonarQube                 Trivy                  │   │
│  │   ├── Runners              ├── Docker Registry      ├── Code Quality          └── Security Scan     │   │
│  │   ├── Pipelines            └── Artifact Storage     └── 20 Projects                                 │   │
│  │   └── DinD                                                                                           │   │
│  │                                                                                                      │   │
│  └─────────────────────────────────────────────────────────────────────────────────────────────────────┘   │
│                                                                                                             │
│  ┌─────────────────────────────────────────────────────────────────────────────────────────────────────┐   │
│  │                                        MONITORING                                                    │   │
│  │                                                                                                      │   │
│  │   Prometheus              Grafana                  Jaeger                     Loki                   │   │
│  │   └── Metrics             └── Dashboards           └── Tracing                └── Logs              │   │
│  │                                                                                                      │   │
│  └─────────────────────────────────────────────────────────────────────────────────────────────────────┘   │
│                                                                                                             │
└─────────────────────────────────────────────────────────────────────────────────────────────────────────────┘
```

---

## Environment Configuration

```
┌─────────────────────────────────────────────────────────────────────────────────────────────────────────────┐
│                                      ENVIRONMENT CONFIGURATION                                              │
├─────────────────────────────────────────────────────────────────────────────────────────────────────────────┤
│                                                                                                             │
│   ┌─────────────────────────────────────────────────────────────────────────────────────────────────────┐  │
│   │                                    PRIMARY .ENV CONFIGURATION                                        │  │
│   │                                                                                                      │  │
│   │   # Database Connections                                                                             │  │
│   │   DATABASE_URL=postgresql://postgres:postgres@postgres:5432/modernization                            │  │
│   │   REDIS_URL=redis://redis:6379/0                                                                     │  │
│   │                                                                                                      │  │
│   │   # AI Services                                                                                      │  │
│   │   OLLAMA_URL=http://ollama:11434                                                                     │  │
│   │   CHROMADB_URL=http://chromadb:8000                                                                  │  │
│   │                                                                                                      │  │
│   │   # Storage                                                                                          │  │
│   │   MINIO_ENDPOINT=minio:9000                                                                          │  │
│   │                                                                                                      │  │
│   │   # DevOps                                                                                           │  │
│   │   NEXUS_REGISTRY=ai-nexus:5001                                                                       │  │
│   │   SONARQUBE_URL=http://ai-sonarqube:9000                                                             │  │
│   │   GITLAB_URL=http://gitlab-server                                                                    │  │
│   │                                                                                                      │  │
│   │   # Ticketing                                                                                        │  │
│   │   TICKETING_PROVIDER=redmine                                                                         │  │
│   │   REDMINE_API_KEY=<configured>                                                                       │  │
│   │   REDMINE_PROJECT_ID=<project>                                                                       │  │
│   │                                                                                                      │  │
│   └─────────────────────────────────────────────────────────────────────────────────────────────────────┘  │
│                                                                                                             │
└─────────────────────────────────────────────────────────────────────────────────────────────────────────────┘
```

---

## Volume Mapping

```
┌─────────────────────────────────────────────────────────────────────────────────────────────────────────────┐
│                                          VOLUME MAPPING                                                     │
├─────────────────────────────────────────────────────────────────────────────────────────────────────────────┤
│                                                                                                             │
│   ┌─────────────────────────────┐    ┌─────────────────────────────┐    ┌─────────────────────────────┐    │
│   │      postgres-data          │    │       redis-data            │    │      ollama-models          │    │
│   │                             │    │                             │    │                             │    │
│   │  /var/lib/postgresql/data   │    │  /data                      │    │  /root/.ollama              │    │
│   │                             │    │                             │    │                             │    │
│   │  Purpose: Database files    │    │  Purpose: Cache data        │    │  Purpose: LLM weights       │    │
│   └─────────────────────────────┘    └─────────────────────────────┘    └─────────────────────────────┘    │
│                                                                                                             │
│   ┌─────────────────────────────┐    ┌─────────────────────────────┐    ┌─────────────────────────────┐    │
│   │       minio-data            │    │     prometheus-data         │    │       grafana-data          │    │
│   │                             │    │                             │    │                             │    │
│   │  /data                      │    │  /prometheus                │    │  /var/lib/grafana           │    │
│   │                             │    │                             │    │                             │    │
│   │  Purpose: Object storage    │    │  Purpose: Metrics TSDB      │    │  Purpose: Dashboards        │    │
│   └─────────────────────────────┘    └─────────────────────────────┘    └─────────────────────────────┘    │
│                                                                                                             │
│   ┌─────────────────────────────┐                                                                          │
│   │        loki-data            │                                                                          │
│   │                             │                                                                          │
│   │  /loki                      │                                                                          │
│   │                             │                                                                          │
│   │  Purpose: Log storage       │                                                                          │
│   └─────────────────────────────┘                                                                          │
│                                                                                                             │
└─────────────────────────────────────────────────────────────────────────────────────────────────────────────┘
```

---

## Deployment Architecture

```
┌─────────────────────────────────────────────────────────────────────────────────────────────────────────────┐
│                                       DEPLOYMENT ARCHITECTURE                                               │
├─────────────────────────────────────────────────────────────────────────────────────────────────────────────┤
│                                                                                                             │
│   ┌─────────────────────────────────────────────────────────────────────────────────────────────────────┐  │
│   │                                   DOCKER COMPOSE STACKS                                              │  │
│   │                                                                                                      │  │
│   │   ┌─────────────────────────────────────────────────────────────────────────────────────────────┐   │  │
│   │   │   legacy-modernization-api/docker-compose.yml    Main API Service Stack                     │   │  │
│   │   │   ├── modernization-api                                                                     │   │  │
│   │   │   ├── postgres                                                                              │   │  │
│   │   │   ├── redis                                                                                 │   │  │
│   │   │   ├── chromadb                                                                              │   │  │
│   │   │   ├── ollama                                                                                │   │  │
│   │   │   └── minio                                                                                 │   │  │
│   │   └─────────────────────────────────────────────────────────────────────────────────────────────┘   │  │
│   │                                                                                                      │  │
│   │   ┌─────────────────────────────────────────────────────────────────────────────────────────────┐   │  │
│   │   │   monitoring-stack.yml                           Observability Stack                        │   │  │
│   │   │   ├── prometheus                                                                            │   │  │
│   │   │   ├── grafana                                                                               │   │  │
│   │   │   ├── jaeger                                                                                │   │  │
│   │   │   ├── loki                                                                                  │   │  │
│   │   │   ├── node-exporter                                                                         │   │  │
│   │   │   ├── cadvisor                                                                              │   │  │
│   │   │   └── dcgm-exporter                                                                         │   │  │
│   │   └─────────────────────────────────────────────────────────────────────────────────────────────┘   │  │
│   │                                                                                                      │  │
│   │   ┌─────────────────────────────────────────────────────────────────────────────────────────────┐   │  │
│   │   │   plane/docker-compose.yml                       Ticketing Stack                            │   │  │
│   │   │   ├── redmine                                                                               │   │  │
│   │   │   └── redmine-db                                                                            │   │  │
│   │   └─────────────────────────────────────────────────────────────────────────────────────────────┘   │  │
│   │                                                                                                      │  │
│   │   ┌─────────────────────────────────────────────────────────────────────────────────────────────┐   │  │
│   │   │   gitlab-runner/docker-compose.yml               CI/CD Runner Stack                         │   │  │
│   │   │   └── gitlab-runner                                                                         │   │  │
│   │   └─────────────────────────────────────────────────────────────────────────────────────────────┘   │  │
│   │                                                                                                      │  │
│   └─────────────────────────────────────────────────────────────────────────────────────────────────────┘  │
│                                                                                                             │
└─────────────────────────────────────────────────────────────────────────────────────────────────────────────┘
```

---

## SonarQube Pre-configured Projects

```
┌─────────────────────────────────────────────────────────────────────────────────────────────────────────────┐
│                                   SONARQUBE PRE-CONFIGURED PROJECTS                                         │
├─────────────────────────────────────────────────────────────────────────────────────────────────────────────┤
│                                                                                                             │
│   ┌─────────────────────────────────────────────────────────────────────────────────────────────────────┐  │
│   │                            20 LEGACY APPLICATION PROJECTS                                            │  │
│   │                                                                                                      │  │
│   │   ┌─────────────────────────┐  ┌─────────────────────────┐  ┌─────────────────────────┐             │  │
│   │   │ legacy-banking-core     │  │ legacy-insurance-policy │  │ legacy-retail-pos       │             │  │
│   │   │ legacy-healthcare-rec   │  │ legacy-crm-system       │  │ legacy-erp-finance      │             │  │
│   │   │ legacy-inventory-mgr    │  │ legacy-hr-payroll       │  │ legacy-telecom-billing  │             │  │
│   │   │ legacy-logistics-track  │  │ legacy-hotel-booking    │  │ legacy-flight-reserv    │             │  │
│   │   │ legacy-supply-chain     │  │ legacy-manufacturing    │  │ legacy-asset-mgmt       │             │  │
│   │   │ legacy-document-arch    │  │ legacy-email-gateway    │  │ legacy-reporting-eng    │             │  │
│   │   │ legacy-auth-service     │  │ legacy-data-warehouse   │  │                         │             │  │
│   │   └─────────────────────────┘  └─────────────────────────┘  └─────────────────────────┘             │  │
│   │                                                                                                      │  │
│   │   Each project configured with:                                                                      │  │
│   │   • Unique authentication token                                                                      │  │
│   │   • Quality gates                                                                                    │  │
│   │   • Analysis rules                                                                                   │  │
│   │                                                                                                      │  │
│   └─────────────────────────────────────────────────────────────────────────────────────────────────────┘  │
│                                                                                                             │
└─────────────────────────────────────────────────────────────────────────────────────────────────────────────┘
```

---

## Document Information

| Attribute | Value |
|-----------|-------|
| Document Version | 1.0.0 |
| Created | January 2026 |
| Platform | Legacy Application Modernization Platform |
| Architecture | Microservices / Docker Compose |
| Target Environment | On-premise / Hybrid Cloud |

---

**End of Infrastructure Diagram Documentation**
