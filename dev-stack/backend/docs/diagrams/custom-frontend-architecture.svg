<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1600 1400" width="1600" height="1400">
  <defs>
    <marker id="arrow" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#475569"/>
    </marker>
    <marker id="arrowBlue" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#3b82f6"/>
    </marker>
    <marker id="arrowGreen" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#22c55e"/>
    </marker>
    <marker id="arrowPurple" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#8b5cf6"/>
    </marker>
    <marker id="arrowOrange" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#f97316"/>
    </marker>
  </defs>

  <!-- Background -->
  <rect width="1600" height="1400" fill="#f0fdf4"/>

  <!-- Title -->
  <rect x="0" y="0" width="1600" height="60" fill="#166534"/>
  <text x="800" y="40" text-anchor="middle" font-family="Arial, sans-serif" font-size="26" font-weight="bold" fill="white">Custom Frontend Architecture - Separate Application Design</text>

  <!-- ==================== COMPARISON HEADER ==================== -->
  <rect x="20" y="80" width="770" height="40" rx="8" fill="#ef4444"/>
  <text x="405" y="105" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="white">CURRENT: Open-WebUI (All-in-One)</text>

  <rect x="810" y="80" width="770" height="40" rx="8" fill="#22c55e"/>
  <text x="1195" y="105" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="white">PROPOSED: Custom Frontend (Separate)</text>

  <!-- ==================== CURRENT ARCHITECTURE ==================== -->
  <rect x="20" y="130" width="770" height="320" rx="10" fill="#fef2f2" stroke="#ef4444" stroke-width="2"/>

  <!-- Open-WebUI Box -->
  <rect x="40" y="150" width="730" height="280" rx="8" fill="white" stroke="#dc2626" stroke-width="2"/>
  <text x="405" y="175" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="#991b1b">Open-WebUI Container (Monolithic)</text>

  <!-- Components -->
  <rect x="60" y="195" width="150" height="50" rx="5" fill="#fecaca"/>
  <text x="135" y="225" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#7f1d1d">SvelteKit Frontend</text>

  <rect x="230" y="195" width="150" height="50" rx="5" fill="#fecaca"/>
  <text x="305" y="225" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#7f1d1d">FastAPI Backend</text>

  <rect x="400" y="195" width="150" height="50" rx="5" fill="#fecaca"/>
  <text x="475" y="225" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#7f1d1d">SQLite Database</text>

  <rect x="570" y="195" width="150" height="50" rx="5" fill="#fecaca"/>
  <text x="645" y="225" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#7f1d1d">Vector DB</text>

  <!-- Storage -->
  <rect x="60" y="260" width="660" height="60" rx="5" fill="#fee2e2"/>
  <text x="390" y="285" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" font-weight="bold" fill="#991b1b">All Data Stored Inside Container</text>
  <text x="390" y="305" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#7f1d1d">Models, Tools, Prompts, Documents, Chats, Users, Files → webui.db + /uploads/ + /vector_db/</text>

  <!-- Limitations -->
  <rect x="60" y="335" width="660" height="85" rx="5" fill="#fef2f2" stroke="#fca5a5" stroke-width="1"/>
  <text x="390" y="355" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" font-weight="bold" fill="#991b1b">Limitations:</text>
  <text x="70" y="375" font-family="Arial, sans-serif" font-size="9" fill="#7f1d1d">• Tightly coupled - can't use frontend without their backend</text>
  <text x="70" y="390" font-family="Arial, sans-serif" font-size="9" fill="#7f1d1d">• Limited customization - must follow their UI patterns</text>
  <text x="70" y="405" font-family="Arial, sans-serif" font-size="9" fill="#7f1d1d">• Data locked in container - hard to integrate with other systems</text>
  <text x="400" y="375" font-family="Arial, sans-serif" font-size="9" fill="#7f1d1d">• Upgrades risky - may lose custom configs</text>
  <text x="400" y="390" font-family="Arial, sans-serif" font-size="9" fill="#7f1d1d">• Can't scale frontend/backend independently</text>
  <text x="400" y="405" font-family="Arial, sans-serif" font-size="9" fill="#7f1d1d">• Single authentication system</text>

  <!-- ==================== PROPOSED ARCHITECTURE ==================== -->
  <rect x="810" y="130" width="770" height="320" rx="10" fill="#f0fdf4" stroke="#22c55e" stroke-width="2"/>

  <!-- Separate Boxes -->
  <rect x="830" y="150" width="220" height="130" rx="8" fill="#dbeafe" stroke="#3b82f6" stroke-width="2"/>
  <text x="940" y="175" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#1e40af">Custom Frontend</text>
  <text x="940" y="195" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#3b82f6">React / Vue / Next.js</text>
  <text x="840" y="220" font-family="Arial, sans-serif" font-size="9" fill="#1e3a8a">• Your own UI design</text>
  <text x="840" y="235" font-family="Arial, sans-serif" font-size="9" fill="#1e3a8a">• Custom authentication</text>
  <text x="840" y="250" font-family="Arial, sans-serif" font-size="9" fill="#1e3a8a">• Role-based access</text>
  <text x="840" y="265" font-family="Arial, sans-serif" font-size="9" fill="#1e3a8a">• Branding flexibility</text>

  <rect x="1080" y="150" width="220" height="130" rx="8" fill="#bbf7d0" stroke="#22c55e" stroke-width="2"/>
  <text x="1190" y="175" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#166534">Custom Backend API</text>
  <text x="1190" y="195" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#22c55e">FastAPI / Node.js / Go</text>
  <text x="1090" y="220" font-family="Arial, sans-serif" font-size="9" fill="#14532d">• Manage models/tools/prompts</text>
  <text x="1090" y="235" font-family="Arial, sans-serif" font-size="9" fill="#14532d">• Orchestrate LLM calls</text>
  <text x="1090" y="250" font-family="Arial, sans-serif" font-size="9" fill="#14532d">• Execute tool code</text>
  <text x="1090" y="265" font-family="Arial, sans-serif" font-size="9" fill="#14532d">• Handle file uploads</text>

  <rect x="1330" y="150" width="230" height="130" rx="8" fill="#fef3c7" stroke="#f59e0b" stroke-width="2"/>
  <text x="1445" y="175" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#92400e">Database (PostgreSQL)</text>
  <text x="1445" y="195" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#b45309">Shared across services</text>
  <text x="1340" y="220" font-family="Arial, sans-serif" font-size="9" fill="#92400e">• Models configuration</text>
  <text x="1340" y="235" font-family="Arial, sans-serif" font-size="9" fill="#92400e">• Tools (code + specs)</text>
  <text x="1340" y="250" font-family="Arial, sans-serif" font-size="9" fill="#92400e">• Prompts library</text>
  <text x="1340" y="265" font-family="Arial, sans-serif" font-size="9" fill="#92400e">• Chat history</text>

  <!-- Benefits -->
  <rect x="830" y="295" width="730" height="135" rx="5" fill="#dcfce7" stroke="#86efac" stroke-width="1"/>
  <text x="1195" y="315" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" font-weight="bold" fill="#166534">Benefits:</text>
  <text x="840" y="335" font-family="Arial, sans-serif" font-size="9" fill="#14532d">• Fully customizable UI - match your brand</text>
  <text x="840" y="350" font-family="Arial, sans-serif" font-size="9" fill="#14532d">• Scale frontend/backend independently</text>
  <text x="840" y="365" font-family="Arial, sans-serif" font-size="9" fill="#14532d">• Use any auth system (LDAP, SSO, OAuth)</text>
  <text x="840" y="380" font-family="Arial, sans-serif" font-size="9" fill="#14532d">• Data persisted in proper database</text>
  <text x="840" y="395" font-family="Arial, sans-serif" font-size="9" fill="#14532d">• Easy to backup and migrate</text>
  <text x="840" y="410" font-family="Arial, sans-serif" font-size="9" fill="#14532d">• Integrate with existing enterprise systems</text>
  <text x="1200" y="335" font-family="Arial, sans-serif" font-size="9" fill="#14532d">• Multiple frontends can share same backend</text>
  <text x="1200" y="350" font-family="Arial, sans-serif" font-size="9" fill="#14532d">• Add mobile app using same API</text>
  <text x="1200" y="365" font-family="Arial, sans-serif" font-size="9" fill="#14532d">• Version tools/prompts with proper versioning</text>
  <text x="1200" y="380" font-family="Arial, sans-serif" font-size="9" fill="#14532d">• Audit logging and compliance</text>
  <text x="1200" y="395" font-family="Arial, sans-serif" font-size="9" fill="#14532d">• Fine-grained access control</text>
  <text x="1200" y="410" font-family="Arial, sans-serif" font-size="9" fill="#14532d">• Can still use Open-WebUI tools if needed</text>

  <!-- ==================== PROPOSED DATABASE SCHEMA ==================== -->
  <rect x="20" y="470" width="1560" height="380" rx="10" fill="white" stroke="#8b5cf6" stroke-width="2"/>
  <rect x="20" y="470" width="1560" height="35" rx="10" fill="#8b5cf6"/>
  <text x="800" y="493" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="white">PROPOSED DATABASE SCHEMA (PostgreSQL)</text>

  <!-- Models Table -->
  <rect x="40" y="520" width="280" height="160" rx="8" fill="#fed7aa" stroke="#f97316" stroke-width="2"/>
  <text x="180" y="545" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#c2410c">ai_models</text>
  <text x="50" y="570" font-family="monospace" font-size="9" fill="#7c2d12">id UUID PRIMARY KEY</text>
  <text x="50" y="587" font-family="monospace" font-size="9" fill="#7c2d12">name VARCHAR(255)</text>
  <text x="50" y="604" font-family="monospace" font-size="9" fill="#7c2d12">base_model VARCHAR(100) -- ollama model</text>
  <text x="50" y="621" font-family="monospace" font-size="9" fill="#7c2d12">system_prompt TEXT</text>
  <text x="50" y="638" font-family="monospace" font-size="9" fill="#7c2d12">capabilities JSONB</text>
  <text x="50" y="655" font-family="monospace" font-size="9" fill="#7c2d12">is_active BOOLEAN</text>
  <text x="50" y="672" font-family="monospace" font-size="9" fill="#7c2d12">created_at, updated_at TIMESTAMP</text>

  <!-- Tools Table -->
  <rect x="350" y="520" width="280" height="160" rx="8" fill="#dcfce7" stroke="#22c55e" stroke-width="2"/>
  <text x="490" y="545" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#166534">ai_tools</text>
  <text x="360" y="570" font-family="monospace" font-size="9" fill="#14532d">id UUID PRIMARY KEY</text>
  <text x="360" y="587" font-family="monospace" font-size="9" fill="#14532d">name VARCHAR(255)</text>
  <text x="360" y="604" font-family="monospace" font-size="9" fill="#14532d">description TEXT</text>
  <text x="360" y="621" font-family="monospace" font-size="9" fill="#14532d">code TEXT -- Python/JS code</text>
  <text x="360" y="638" font-family="monospace" font-size="9" fill="#14532d">spec JSONB -- OpenAI tool schema</text>
  <text x="360" y="655" font-family="monospace" font-size="9" fill="#14532d">config JSONB -- valves/settings</text>
  <text x="360" y="672" font-family="monospace" font-size="9" fill="#14532d">version INT, is_active BOOLEAN</text>

  <!-- Model-Tools Junction -->
  <rect x="660" y="520" width="240" height="120" rx="8" fill="#e9d5ff" stroke="#8b5cf6" stroke-width="2"/>
  <text x="780" y="545" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#6b21a8">model_tools</text>
  <text x="670" y="570" font-family="monospace" font-size="9" fill="#581c87">id UUID PRIMARY KEY</text>
  <text x="670" y="587" font-family="monospace" font-size="9" fill="#581c87">model_id UUID REFERENCES ai_models</text>
  <text x="670" y="604" font-family="monospace" font-size="9" fill="#581c87">tool_id UUID REFERENCES ai_tools</text>
  <text x="670" y="621" font-family="monospace" font-size="9" fill="#581c87">order_index INT</text>

  <!-- Prompts Table -->
  <rect x="930" y="520" width="280" height="160" rx="8" fill="#dbeafe" stroke="#3b82f6" stroke-width="2"/>
  <text x="1070" y="545" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#1e40af">ai_prompts</text>
  <text x="940" y="570" font-family="monospace" font-size="9" fill="#1e3a8a">id UUID PRIMARY KEY</text>
  <text x="940" y="587" font-family="monospace" font-size="9" fill="#1e3a8a">name VARCHAR(255)</text>
  <text x="940" y="604" font-family="monospace" font-size="9" fill="#1e3a8a">command VARCHAR(50) -- shortcut</text>
  <text x="940" y="621" font-family="monospace" font-size="9" fill="#1e3a8a">content TEXT -- prompt template</text>
  <text x="940" y="638" font-family="monospace" font-size="9" fill="#1e3a8a">category VARCHAR(100)</text>
  <text x="940" y="655" font-family="monospace" font-size="9" fill="#1e3a8a">variables JSONB -- {{variable}} defs</text>
  <text x="940" y="672" font-family="monospace" font-size="9" fill="#1e3a8a">user_id UUID REFERENCES users</text>

  <!-- Documents Table -->
  <rect x="1240" y="520" width="320" height="160" rx="8" fill="#fecaca" stroke="#ef4444" stroke-width="2"/>
  <text x="1400" y="545" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#991b1b">ai_documents</text>
  <text x="1250" y="570" font-family="monospace" font-size="9" fill="#7f1d1d">id UUID PRIMARY KEY</text>
  <text x="1250" y="587" font-family="monospace" font-size="9" fill="#7f1d1d">name VARCHAR(255)</text>
  <text x="1250" y="604" font-family="monospace" font-size="9" fill="#7f1d1d">file_path VARCHAR(500)</text>
  <text x="1250" y="621" font-family="monospace" font-size="9" fill="#7f1d1d">content TEXT -- extracted text</text>
  <text x="1250" y="638" font-family="monospace" font-size="9" fill="#7f1d1d">embedding_id VARCHAR(100) -- chromadb ref</text>
  <text x="1250" y="655" font-family="monospace" font-size="9" fill="#7f1d1d">metadata JSONB</text>
  <text x="1250" y="672" font-family="monospace" font-size="9" fill="#7f1d1d">knowledge_base_id UUID</text>

  <!-- Chats Table -->
  <rect x="40" y="695" width="280" height="140" rx="8" fill="#cffafe" stroke="#06b6d4" stroke-width="2"/>
  <text x="180" y="720" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#0e7490">ai_chats</text>
  <text x="50" y="745" font-family="monospace" font-size="9" fill="#164e63">id UUID PRIMARY KEY</text>
  <text x="50" y="762" font-family="monospace" font-size="9" fill="#164e63">user_id UUID REFERENCES users</text>
  <text x="50" y="779" font-family="monospace" font-size="9" fill="#164e63">model_id UUID REFERENCES ai_models</text>
  <text x="50" y="796" font-family="monospace" font-size="9" fill="#164e63">title VARCHAR(255)</text>
  <text x="50" y="813" font-family="monospace" font-size="9" fill="#164e63">is_archived BOOLEAN</text>

  <!-- Messages Table -->
  <rect x="350" y="695" width="280" height="140" rx="8" fill="#cffafe" stroke="#06b6d4" stroke-width="2"/>
  <text x="490" y="720" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#0e7490">ai_messages</text>
  <text x="360" y="745" font-family="monospace" font-size="9" fill="#164e63">id UUID PRIMARY KEY</text>
  <text x="360" y="762" font-family="monospace" font-size="9" fill="#164e63">chat_id UUID REFERENCES ai_chats</text>
  <text x="360" y="779" font-family="monospace" font-size="9" fill="#164e63">role VARCHAR(20) -- user/assistant/tool</text>
  <text x="360" y="796" font-family="monospace" font-size="9" fill="#164e63">content TEXT</text>
  <text x="360" y="813" font-family="monospace" font-size="9" fill="#164e63">tool_calls JSONB, metadata JSONB</text>

  <!-- Users Table -->
  <rect x="660" y="655" width="240" height="180" rx="8" fill="#f5f5f4" stroke="#78716c" stroke-width="2"/>
  <text x="780" y="680" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#44403c">users</text>
  <text x="670" y="705" font-family="monospace" font-size="9" fill="#57534e">id UUID PRIMARY KEY</text>
  <text x="670" y="722" font-family="monospace" font-size="9" fill="#57534e">email VARCHAR(255) UNIQUE</text>
  <text x="670" y="739" font-family="monospace" font-size="9" fill="#57534e">password_hash VARCHAR(255)</text>
  <text x="670" y="756" font-family="monospace" font-size="9" fill="#57534e">name VARCHAR(255)</text>
  <text x="670" y="773" font-family="monospace" font-size="9" fill="#57534e">role VARCHAR(50) -- admin/user</text>
  <text x="670" y="790" font-family="monospace" font-size="9" fill="#57534e">settings JSONB</text>
  <text x="670" y="807" font-family="monospace" font-size="9" fill="#57534e">api_key VARCHAR(100)</text>
  <text x="670" y="824" font-family="monospace" font-size="9" fill="#57534e">last_active_at TIMESTAMP</text>

  <!-- Knowledge Base -->
  <rect x="930" y="695" width="280" height="140" rx="8" fill="#fce7f3" stroke="#ec4899" stroke-width="2"/>
  <text x="1070" y="720" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#9d174d">ai_knowledge_bases</text>
  <text x="940" y="745" font-family="monospace" font-size="9" fill="#831843">id UUID PRIMARY KEY</text>
  <text x="940" y="762" font-family="monospace" font-size="9" fill="#831843">name VARCHAR(255)</text>
  <text x="940" y="779" font-family="monospace" font-size="9" fill="#831843">description TEXT</text>
  <text x="940" y="796" font-family="monospace" font-size="9" fill="#831843">chromadb_collection VARCHAR(100)</text>
  <text x="940" y="813" font-family="monospace" font-size="9" fill="#831843">user_id UUID, is_public BOOLEAN</text>

  <!-- Model-Prompts Junction -->
  <rect x="1240" y="695" width="320" height="140" rx="8" fill="#e9d5ff" stroke="#8b5cf6" stroke-width="2"/>
  <text x="1400" y="720" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#6b21a8">model_prompts (optional)</text>
  <text x="1250" y="745" font-family="monospace" font-size="9" fill="#581c87">id UUID PRIMARY KEY</text>
  <text x="1250" y="762" font-family="monospace" font-size="9" fill="#581c87">model_id UUID REFERENCES ai_models</text>
  <text x="1250" y="779" font-family="monospace" font-size="9" fill="#581c87">prompt_id UUID REFERENCES ai_prompts</text>
  <text x="1250" y="796" font-family="monospace" font-size="9" fill="#6b21a8">-- Links suggested prompts to models</text>
  <text x="1250" y="813" font-family="monospace" font-size="9" fill="#6b21a8">-- Shown as quick-start buttons</text>

  <!-- ==================== API ENDPOINTS ==================== -->
  <rect x="20" y="870" width="1560" height="250" rx="10" fill="white" stroke="#22c55e" stroke-width="2"/>
  <rect x="20" y="870" width="1560" height="35" rx="10" fill="#22c55e"/>
  <text x="800" y="893" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="white">CUSTOM BACKEND API ENDPOINTS</text>

  <!-- Models API -->
  <rect x="40" y="920" width="350" height="180" rx="8" fill="#f0fdf4" stroke="#22c55e" stroke-width="1"/>
  <text x="215" y="945" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#166534">/api/models</text>
  <text x="50" y="970" font-family="monospace" font-size="9" fill="#14532d">GET    /api/models              # List all</text>
  <text x="50" y="987" font-family="monospace" font-size="9" fill="#14532d">GET    /api/models/:id          # Get one</text>
  <text x="50" y="1004" font-family="monospace" font-size="9" fill="#14532d">POST   /api/models              # Create</text>
  <text x="50" y="1021" font-family="monospace" font-size="9" fill="#14532d">PUT    /api/models/:id          # Update</text>
  <text x="50" y="1038" font-family="monospace" font-size="9" fill="#14532d">DELETE /api/models/:id          # Delete</text>
  <text x="50" y="1055" font-family="monospace" font-size="9" fill="#14532d">POST   /api/models/:id/tools    # Attach tools</text>
  <text x="50" y="1072" font-family="monospace" font-size="9" fill="#14532d">GET    /api/models/:id/tools    # List tools</text>
  <text x="50" y="1089" font-family="monospace" font-size="9" fill="#14532d">POST   /api/models/:id/test     # Test model</text>

  <!-- Tools API -->
  <rect x="410" y="920" width="350" height="180" rx="8" fill="#f0fdf4" stroke="#22c55e" stroke-width="1"/>
  <text x="585" y="945" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#166534">/api/tools</text>
  <text x="420" y="970" font-family="monospace" font-size="9" fill="#14532d">GET    /api/tools               # List all</text>
  <text x="420" y="987" font-family="monospace" font-size="9" fill="#14532d">GET    /api/tools/:id           # Get one</text>
  <text x="420" y="1004" font-family="monospace" font-size="9" fill="#14532d">POST   /api/tools               # Create</text>
  <text x="420" y="1021" font-family="monospace" font-size="9" fill="#14532d">PUT    /api/tools/:id           # Update</text>
  <text x="420" y="1038" font-family="monospace" font-size="9" fill="#14532d">DELETE /api/tools/:id           # Delete</text>
  <text x="420" y="1055" font-family="monospace" font-size="9" fill="#14532d">POST   /api/tools/:id/execute   # Run tool</text>
  <text x="420" y="1072" font-family="monospace" font-size="9" fill="#14532d">POST   /api/tools/:id/validate  # Validate code</text>
  <text x="420" y="1089" font-family="monospace" font-size="9" fill="#14532d">GET    /api/tools/:id/versions  # History</text>

  <!-- Chat API -->
  <rect x="780" y="920" width="350" height="180" rx="8" fill="#f0fdf4" stroke="#22c55e" stroke-width="1"/>
  <text x="955" y="945" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#166534">/api/chat</text>
  <text x="790" y="970" font-family="monospace" font-size="9" fill="#14532d">POST   /api/chat/completion     # Send message</text>
  <text x="790" y="987" font-family="monospace" font-size="9" fill="#14532d">POST   /api/chat/stream         # Stream response</text>
  <text x="790" y="1004" font-family="monospace" font-size="9" fill="#14532d">GET    /api/chats               # List chats</text>
  <text x="790" y="1021" font-family="monospace" font-size="9" fill="#14532d">GET    /api/chats/:id           # Get chat</text>
  <text x="790" y="1038" font-family="monospace" font-size="9" fill="#14532d">GET    /api/chats/:id/messages  # Messages</text>
  <text x="790" y="1055" font-family="monospace" font-size="9" fill="#14532d">DELETE /api/chats/:id           # Delete</text>
  <text x="790" y="1072" font-family="monospace" font-size="9" fill="#14532d">POST   /api/chats/:id/title     # Rename</text>
  <text x="790" y="1089" font-family="monospace" font-size="9" fill="#14532d">POST   /api/chats/:id/export    # Export</text>

  <!-- Other APIs -->
  <rect x="1150" y="920" width="410" height="180" rx="8" fill="#f0fdf4" stroke="#22c55e" stroke-width="1"/>
  <text x="1355" y="945" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#166534">Other Endpoints</text>
  <text x="1160" y="970" font-family="monospace" font-size="9" fill="#14532d">/api/prompts      # CRUD for prompt templates</text>
  <text x="1160" y="987" font-family="monospace" font-size="9" fill="#14532d">/api/documents    # Upload/manage documents</text>
  <text x="1160" y="1004" font-family="monospace" font-size="9" fill="#14532d">/api/knowledge    # Knowledge base management</text>
  <text x="1160" y="1021" font-family="monospace" font-size="9" fill="#14532d">/api/files        # File upload/download</text>
  <text x="1160" y="1038" font-family="monospace" font-size="9" fill="#14532d">/api/users        # User management (admin)</text>
  <text x="1160" y="1055" font-family="monospace" font-size="9" fill="#14532d">/api/auth         # Login/logout/refresh</text>
  <text x="1160" y="1072" font-family="monospace" font-size="9" fill="#14532d">/api/settings     # User preferences</text>
  <text x="1160" y="1089" font-family="monospace" font-size="9" fill="#14532d">/api/ollama/*     # Proxy to Ollama (models list)</text>

  <!-- ==================== FLOW DIAGRAM ==================== -->
  <rect x="20" y="1140" width="1560" height="240" rx="10" fill="#f5f3ff" stroke="#8b5cf6" stroke-width="2"/>
  <rect x="20" y="1140" width="1560" height="35" rx="10" fill="#8b5cf6"/>
  <text x="800" y="1163" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="white">DATA FLOW: How Models Get Prompts, Tools &amp; Documents in Custom Frontend</text>

  <!-- Step boxes -->
  <rect x="40" y="1190" width="180" height="80" rx="6" fill="#dbeafe" stroke="#3b82f6" stroke-width="1"/>
  <text x="130" y="1215" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" font-weight="bold" fill="#1e40af">1. User Selects Model</text>
  <text x="50" y="1240" font-family="Arial, sans-serif" font-size="9" fill="#3b82f6">GET /api/models</text>
  <text x="50" y="1255" font-family="Arial, sans-serif" font-size="9" fill="#3b82f6">Show dropdown list</text>

  <line x1="220" y1="1230" x2="260" y2="1230" stroke="#475569" stroke-width="2" marker-end="url(#arrow)"/>

  <rect x="270" y="1190" width="200" height="80" rx="6" fill="#f5f3ff" stroke="#8b5cf6" stroke-width="1"/>
  <text x="370" y="1215" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" font-weight="bold" fill="#6b21a8">2. Load Model Config</text>
  <text x="280" y="1240" font-family="Arial, sans-serif" font-size="9" fill="#7c3aed">Backend queries:</text>
  <text x="280" y="1255" font-family="Arial, sans-serif" font-size="9" fill="#7c3aed">ai_models + model_tools</text>

  <line x1="470" y1="1230" x2="510" y2="1230" stroke="#475569" stroke-width="2" marker-end="url(#arrow)"/>

  <rect x="520" y="1190" width="200" height="80" rx="6" fill="#dcfce7" stroke="#22c55e" stroke-width="1"/>
  <text x="620" y="1215" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" font-weight="bold" fill="#166534">3. Load Attached Tools</text>
  <text x="530" y="1240" font-family="Arial, sans-serif" font-size="9" fill="#15803d">Query ai_tools by IDs</text>
  <text x="530" y="1255" font-family="Arial, sans-serif" font-size="9" fill="#15803d">Get code + specs</text>

  <line x1="720" y1="1230" x2="760" y2="1230" stroke="#475569" stroke-width="2" marker-end="url(#arrow)"/>

  <rect x="770" y="1190" width="200" height="80" rx="6" fill="#fed7aa" stroke="#f97316" stroke-width="1"/>
  <text x="870" y="1215" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" font-weight="bold" fill="#c2410c">4. User Sends Message</text>
  <text x="780" y="1240" font-family="Arial, sans-serif" font-size="9" fill="#ea580c">POST /api/chat/completion</text>
  <text x="780" y="1255" font-family="Arial, sans-serif" font-size="9" fill="#ea580c">{model_id, message}</text>

  <line x1="970" y1="1230" x2="1010" y2="1230" stroke="#475569" stroke-width="2" marker-end="url(#arrow)"/>

  <rect x="1020" y="1190" width="240" height="80" rx="6" fill="#1e293b" stroke="#0f172a" stroke-width="1"/>
  <text x="1140" y="1215" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" font-weight="bold" fill="white">5. Backend Calls Ollama</text>
  <text x="1030" y="1240" font-family="Arial, sans-serif" font-size="9" fill="#94a3b8">Sends: system_prompt +</text>
  <text x="1030" y="1255" font-family="Arial, sans-serif" font-size="9" fill="#94a3b8">tools[] + messages</text>

  <line x1="1260" y1="1230" x2="1300" y2="1230" stroke="#475569" stroke-width="2" marker-end="url(#arrow)"/>

  <rect x="1310" y="1190" width="250" height="80" rx="6" fill="#fef3c7" stroke="#f59e0b" stroke-width="1"/>
  <text x="1435" y="1215" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" font-weight="bold" fill="#92400e">6. Execute Tools if Called</text>
  <text x="1320" y="1240" font-family="Arial, sans-serif" font-size="9" fill="#b45309">Run tool.code with args</text>
  <text x="1320" y="1255" font-family="Arial, sans-serif" font-size="9" fill="#b45309">Return results to LLM</text>

  <!-- Summary -->
  <rect x="40" y="1285" width="1520" height="80" rx="6" fill="#dcfce7" stroke="#22c55e" stroke-width="2"/>
  <text x="800" y="1310" text-anchor="middle" font-family="Arial, sans-serif" font-size="13" font-weight="bold" fill="#166534">KEY DIFFERENCE FROM OPEN-WEBUI</text>
  <text x="50" y="1335" font-family="Arial, sans-serif" font-size="10" fill="#14532d">• Data stored in PostgreSQL instead of SQLite → Better scalability, backup, replication</text>
  <text x="50" y="1352" font-family="Arial, sans-serif" font-size="10" fill="#14532d">• Proper relational schema with foreign keys → Data integrity and easier queries</text>
  <text x="700" y="1335" font-family="Arial, sans-serif" font-size="10" fill="#14532d">• API-first design → Can be used by any frontend (web, mobile, CLI)</text>
  <text x="700" y="1352" font-family="Arial, sans-serif" font-size="10" fill="#14532d">• Separate services → Scale, update, and deploy independently</text>
</svg>
