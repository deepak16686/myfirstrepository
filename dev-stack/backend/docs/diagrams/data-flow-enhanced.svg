<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1400 1100" width="1400" height="1100">
  <defs>
    <marker id="arrow" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#475569"/>
    </marker>
    <marker id="arrowGreen" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#22c55e"/>
    </marker>
    <marker id="arrowRed" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#ef4444"/>
    </marker>
    <marker id="arrowBlue" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#3b82f6"/>
    </marker>
    <marker id="arrowPurple" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#8b5cf6"/>
    </marker>
    <marker id="arrowOrange" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#f97316"/>
    </marker>
  </defs>

  <!-- Background -->
  <rect width="1400" height="1100" fill="#f8fafc"/>

  <!-- Title Bar -->
  <rect x="0" y="0" width="1400" height="55" fill="#0f172a"/>
  <text x="700" y="35" text-anchor="middle" font-family="Arial, sans-serif" font-size="24" font-weight="bold" fill="white">Enhanced Pipeline Generator - Complete Data Flow</text>

  <!-- Phase Labels -->
  <rect x="20" y="70" width="120" height="25" rx="4" fill="#3b82f6"/>
  <text x="80" y="88" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="white">PHASE 1: INPUT</text>

  <rect x="20" y="200" width="120" height="25" rx="4" fill="#8b5cf6"/>
  <text x="80" y="218" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="white">PHASE 2: ANALYZE</text>

  <rect x="20" y="370" width="120" height="25" rx="4" fill="#f97316"/>
  <text x="80" y="388" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="white">PHASE 3: GENERATE</text>

  <rect x="20" y="540" width="120" height="25" rx="4" fill="#22c55e"/>
  <text x="80" y="558" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="white">PHASE 4: VALIDATE</text>

  <rect x="20" y="710" width="120" height="25" rx="4" fill="#ef4444"/>
  <text x="80" y="728" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="white">PHASE 5: DEPLOY</text>

  <rect x="20" y="880" width="120" height="25" rx="4" fill="#06b6d4"/>
  <text x="80" y="898" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="white">PHASE 6: MONITOR</text>

  <!-- ==================== PHASE 1: INPUT ==================== -->

  <!-- User -->
  <circle cx="200" cy="120" r="40" fill="#dbeafe" stroke="#3b82f6" stroke-width="3"/>
  <text x="200" y="115" text-anchor="middle" font-family="Arial, sans-serif" font-size="13" font-weight="bold" fill="#1e40af">User</text>
  <text x="200" y="130" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#3b82f6">Developer</text>

  <!-- Arrow to Open-WebUI -->
  <line x1="240" y1="120" x2="310" y2="120" stroke="#475569" stroke-width="2" marker-end="url(#arrow)"/>
  <text x="275" y="110" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#64748b">Repo URL</text>

  <!-- Open-WebUI -->
  <rect x="320" y="85" width="140" height="70" rx="10" fill="#c7d2fe" stroke="#6366f1" stroke-width="2"/>
  <text x="390" y="112" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#4338ca">Open-WebUI</text>
  <text x="390" y="128" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#6366f1">Port: 3001</text>
  <text x="390" y="143" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#818cf8">AI Chat Interface</text>

  <!-- Arrow to Template Selection -->
  <line x1="460" y1="120" x2="530" y2="120" stroke="#475569" stroke-width="2" marker-end="url(#arrow)"/>

  <!-- Template Library (NEW) -->
  <rect x="540" y="75" width="140" height="90" rx="10" fill="#fef3c7" stroke="#f59e0b" stroke-width="2"/>
  <rect x="540" y="75" width="140" height="25" rx="10" fill="#f59e0b"/>
  <text x="610" y="93" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" font-weight="bold" fill="white">Template Library</text>
  <text x="610" y="115" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#92400e">Select Template Style:</text>
  <text x="610" y="130" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#b45309">- Standard CI/CD</text>
  <text x="610" y="143" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#b45309">- Multi-stage Build</text>
  <text x="610" y="156" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#b45309">- K8s Deployment</text>

  <!-- Arrow to Backend -->
  <line x1="680" y1="120" x2="750" y2="120" stroke="#475569" stroke-width="2" marker-end="url(#arrow)"/>

  <!-- DevOps Backend -->
  <rect x="760" y="70" width="180" height="100" rx="10" fill="#bbf7d0" stroke="#22c55e" stroke-width="3"/>
  <rect x="760" y="70" width="180" height="28" rx="10" fill="#22c55e"/>
  <text x="850" y="90" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="white">DevOps Backend</text>
  <text x="850" y="110" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#166534">Port: 8003</text>
  <text x="850" y="125" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#15803d">Orchestration Layer</text>
  <text x="850" y="140" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#15803d">Multi-Stage Pipeline</text>
  <text x="850" y="155" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#15803d">Validation Engine</text>

  <!-- ==================== PHASE 2: ANALYZE ==================== -->

  <!-- Arrow down to Phase 2 -->
  <line x1="850" y1="170" x2="850" y2="230" stroke="#8b5cf6" stroke-width="2" marker-end="url(#arrowPurple)"/>
  <text x="870" y="205" font-family="Arial, sans-serif" font-size="9" fill="#7c3aed">1. Analyze</text>

  <!-- GitLab Analysis -->
  <rect x="760" y="240" width="180" height="80" rx="10" fill="#fed7aa" stroke="#f97316" stroke-width="2"/>
  <text x="850" y="265" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#c2410c">GitLab Analysis</text>
  <text x="850" y="282" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#ea580c">Port: 8929</text>
  <text x="850" y="298" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#f97316">Fetch: files, structure</text>
  <text x="850" y="311" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#f97316">Detect: language, framework</text>

  <!-- Arrow to ChromaDB -->
  <line x1="760" y1="280" x2="680" y2="280" stroke="#8b5cf6" stroke-width="2" marker-end="url(#arrowPurple)"/>
  <text x="720" y="270" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#7c3aed">2. Feedback</text>

  <!-- ChromaDB -->
  <rect x="520" y="240" width="150" height="80" rx="10" fill="#e9d5ff" stroke="#8b5cf6" stroke-width="2"/>
  <text x="595" y="265" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#6b21a8">ChromaDB</text>
  <text x="595" y="282" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#7c3aed">Port: 8000</text>
  <text x="595" y="298" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#a855f7">RL Feedback Store</text>
  <text x="595" y="311" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#a855f7">Past Corrections</text>

  <!-- Analytics Dashboard (NEW) -->
  <rect x="280" y="240" width="150" height="80" rx="10" fill="#cffafe" stroke="#06b6d4" stroke-width="2"/>
  <rect x="280" y="240" width="150" height="25" rx="10" fill="#06b6d4"/>
  <text x="355" y="258" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" font-weight="bold" fill="white">Analytics Dashboard</text>
  <text x="355" y="280" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#0891b2">Success Rate: 87%</text>
  <text x="355" y="295" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#0891b2">Feedback Applied: 156</text>
  <text x="355" y="310" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#0891b2">Models Tracked: 3</text>

  <!-- Arrow from ChromaDB to Analytics -->
  <line x1="520" y1="280" x2="440" y2="280" stroke="#06b6d4" stroke-width="2" marker-end="url(#arrow)"/>

  <!-- ==================== PHASE 3: GENERATE ==================== -->

  <!-- Arrow down to Phase 3 -->
  <line x1="850" y1="320" x2="850" y2="390" stroke="#f97316" stroke-width="2" marker-end="url(#arrowOrange)"/>
  <text x="870" y="360" font-family="Arial, sans-serif" font-size="9" fill="#ea580c">3. Generate</text>

  <!-- Ollama LLM -->
  <rect x="760" y="400" width="180" height="90" rx="10" fill="#1e293b" stroke="#0f172a" stroke-width="2"/>
  <text x="850" y="425" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="white">Ollama LLM</text>
  <text x="850" y="442" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#94a3b8">Port: 11434</text>
  <text x="850" y="458" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#64748b">qwen2.5-coder:32b</text>
  <text x="850" y="475" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#64748b">+ Feedback Context</text>

  <!-- Generated Files -->
  <rect x="520" y="400" width="180" height="90" rx="10" fill="#fef3c7" stroke="#f59e0b" stroke-width="2"/>
  <text x="610" y="422" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" font-weight="bold" fill="#92400e">Generated Files</text>
  <text x="610" y="440" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#b45309">.gitlab-ci.yml</text>
  <text x="610" y="455" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#b45309">Dockerfile</text>
  <text x="610" y="470" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#b45309">deployment.yaml (K8s)</text>
  <text x="610" y="485" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#b45309">values.yaml (Helm)</text>

  <!-- Arrow from Ollama to Generated -->
  <line x1="760" y1="445" x2="710" y2="445" stroke="#f97316" stroke-width="2" marker-end="url(#arrowOrange)"/>

  <!-- ==================== PHASE 4: VALIDATE ==================== -->

  <!-- Arrow down to Phase 4 -->
  <line x1="610" y1="490" x2="610" y2="560" stroke="#22c55e" stroke-width="2" marker-end="url(#arrowGreen)"/>
  <text x="630" y="530" font-family="Arial, sans-serif" font-size="9" fill="#16a34a">4. Validate</text>

  <!-- Pre-Commit Validation (NEW) -->
  <rect x="420" y="570" width="160" height="100" rx="10" fill="#dcfce7" stroke="#22c55e" stroke-width="2"/>
  <rect x="420" y="570" width="160" height="25" rx="10" fill="#22c55e"/>
  <text x="500" y="588" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" font-weight="bold" fill="white">Pre-Commit Validation</text>
  <text x="500" y="610" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#166534">YAML Syntax Check</text>
  <text x="500" y="625" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#166534">Dockerfile Lint</text>
  <text x="500" y="640" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#166534">Schema Validation</text>
  <text x="500" y="655" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#166534">Best Practices Check</text>

  <!-- Arrow to Security Scan -->
  <line x1="580" y1="620" x2="650" y2="620" stroke="#22c55e" stroke-width="2" marker-end="url(#arrowGreen)"/>

  <!-- Security Scanning (NEW) -->
  <rect x="660" y="570" width="160" height="100" rx="10" fill="#fef2f2" stroke="#ef4444" stroke-width="2"/>
  <rect x="660" y="570" width="160" height="25" rx="10" fill="#ef4444"/>
  <text x="740" y="588" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" font-weight="bold" fill="white">Security Scanning</text>
  <text x="740" y="610" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#991b1b">Trivy Image Scan</text>
  <text x="740" y="625" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#991b1b">Base Image CVEs</text>
  <text x="740" y="640" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#991b1b">Secrets Detection</text>
  <text x="740" y="655" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#991b1b">SAST Analysis</text>

  <!-- Arrow to Preview -->
  <line x1="820" y1="620" x2="890" y2="620" stroke="#22c55e" stroke-width="2" marker-end="url(#arrowGreen)"/>

  <!-- Dry Run Preview (NEW) -->
  <rect x="900" y="570" width="160" height="100" rx="10" fill="#dbeafe" stroke="#3b82f6" stroke-width="2"/>
  <rect x="900" y="570" width="160" height="25" rx="10" fill="#3b82f6"/>
  <text x="980" y="588" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" font-weight="bold" fill="white">Dry Run Preview</text>
  <text x="980" y="610" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#1e40af">Show to User</text>
  <text x="980" y="625" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#1e40af">Allow Edits</text>
  <text x="980" y="640" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#1e40af">Compare Existing</text>
  <text x="980" y="655" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#1e40af">User Approval</text>

  <!-- Arrow back to User for Preview -->
  <path d="M 980 670 Q 980 700 200 700 Q 150 700 150 180" fill="none" stroke="#3b82f6" stroke-width="2" stroke-dasharray="6,3" marker-end="url(#arrowBlue)"/>
  <text x="580" y="715" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#3b82f6">Preview Files (Dry Run Mode)</text>

  <!-- ==================== PHASE 5: DEPLOY ==================== -->

  <!-- Arrow down to Phase 5 -->
  <line x1="980" y1="670" x2="980" y2="740" stroke="#ef4444" stroke-width="2" marker-end="url(#arrowRed)"/>
  <text x="1000" y="710" font-family="Arial, sans-serif" font-size="9" fill="#dc2626">5. Deploy</text>

  <!-- Merge Request (NEW) -->
  <rect x="900" y="750" width="160" height="90" rx="10" fill="#fef3c7" stroke="#f59e0b" stroke-width="2"/>
  <rect x="900" y="750" width="160" height="25" rx="10" fill="#f59e0b"/>
  <text x="980" y="768" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" font-weight="bold" fill="white">Create Merge Request</text>
  <text x="980" y="793" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#92400e">New Branch Created</text>
  <text x="980" y="808" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#92400e">MR for Review</text>
  <text x="980" y="823" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#92400e">Approval Required</text>

  <!-- Arrow to GitLab Commit -->
  <line x1="900" y1="795" x2="830" y2="795" stroke="#ef4444" stroke-width="2" marker-end="url(#arrowRed)"/>

  <!-- GitLab Commit -->
  <rect x="660" y="750" width="160" height="90" rx="10" fill="#fed7aa" stroke="#f97316" stroke-width="2"/>
  <text x="740" y="775" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#c2410c">GitLab Commit</text>
  <text x="740" y="793" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#ea580c">Branch: ai-pipeline-*</text>
  <text x="740" y="810" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#f97316">Commit Files</text>
  <text x="740" y="825" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#f97316">Trigger Pipeline</text>

  <!-- Rollback Capability (NEW) -->
  <rect x="420" y="750" width="160" height="90" rx="10" fill="#fce7f3" stroke="#ec4899" stroke-width="2"/>
  <rect x="420" y="750" width="160" height="25" rx="10" fill="#ec4899"/>
  <text x="500" y="768" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" font-weight="bold" fill="white">Rollback Manager</text>
  <text x="500" y="793" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#9d174d">Track AI Commits</text>
  <text x="500" y="808" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#9d174d">Version History</text>
  <text x="500" y="823" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#9d174d">One-Click Revert</text>

  <!-- Arrow from GitLab to Rollback -->
  <line x1="660" y1="795" x2="590" y2="795" stroke="#ec4899" stroke-width="2" marker-end="url(#arrow)"/>

  <!-- ==================== PHASE 6: MONITOR ==================== -->

  <!-- Arrow down to Phase 6 -->
  <line x1="740" y1="840" x2="740" y2="910" stroke="#06b6d4" stroke-width="2" marker-end="url(#arrow)"/>
  <text x="760" y="880" font-family="Arial, sans-serif" font-size="9" fill="#0891b2">6. Monitor</text>

  <!-- Auto Pipeline Monitor (NEW) -->
  <rect x="660" y="920" width="160" height="90" rx="10" fill="#cffafe" stroke="#06b6d4" stroke-width="2"/>
  <rect x="660" y="920" width="160" height="25" rx="10" fill="#06b6d4"/>
  <text x="740" y="938" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" font-weight="bold" fill="white">Auto Monitor</text>
  <text x="740" y="963" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#0891b2">Poll Pipeline Status</text>
  <text x="740" y="978" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#0891b2">Webhook Integration</text>
  <text x="740" y="993" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#0891b2">Real-time Notifications</text>

  <!-- Success Path -->
  <rect x="880" y="920" width="120" height="60" rx="8" fill="#dcfce7" stroke="#22c55e" stroke-width="2"/>
  <text x="940" y="945" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#166534">SUCCESS</text>
  <text x="940" y="965" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#22c55e">Pipeline Passed</text>

  <!-- Arrow to Success -->
  <line x1="820" y1="950" x2="870" y2="950" stroke="#22c55e" stroke-width="2" marker-end="url(#arrowGreen)"/>
  <text x="845" y="940" font-family="Arial, sans-serif" font-size="8" fill="#16a34a">Pass</text>

  <!-- Failure Path -->
  <rect x="420" y="920" width="160" height="90" rx="10" fill="#fef2f2" stroke="#ef4444" stroke-width="2"/>
  <rect x="420" y="920" width="160" height="25" rx="10" fill="#ef4444"/>
  <text x="500" y="938" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" font-weight="bold" fill="white">FAILURE - Feedback</text>
  <text x="500" y="963" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#991b1b">DevOps Fixes Pipeline</text>
  <text x="500" y="978" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#991b1b">Auto-Detect Changes</text>
  <text x="500" y="993" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#991b1b">Store in ChromaDB</text>

  <!-- Arrow to Failure -->
  <line x1="660" y1="965" x2="590" y2="965" stroke="#ef4444" stroke-width="2" marker-end="url(#arrowRed)"/>
  <text x="625" y="955" font-family="Arial, sans-serif" font-size="8" fill="#dc2626">Fail</text>

  <!-- Arrow from Failure to ChromaDB (feedback loop) -->
  <path d="M 420 965 Q 300 965 300 320" fill="none" stroke="#ef4444" stroke-width="2" stroke-dasharray="6,3" marker-end="url(#arrowRed)"/>
  <text x="280" y="650" font-family="Arial, sans-serif" font-size="9" fill="#dc2626">Store Feedback</text>

  <!-- ==================== LEGEND ==================== -->

  <rect x="1100" y="70" width="280" height="200" rx="8" fill="white" stroke="#e2e8f0" stroke-width="1"/>
  <text x="1240" y="95" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="#334155">Legend</text>
  <line x1="1110" y1="105" x2="1370" y2="105" stroke="#e2e8f0" stroke-width="1"/>

  <line x1="1120" y1="125" x2="1160" y2="125" stroke="#475569" stroke-width="2" marker-end="url(#arrow)"/>
  <text x="1175" y="130" font-family="Arial, sans-serif" font-size="10" fill="#475569">Data Flow</text>

  <line x1="1120" y1="150" x2="1160" y2="150" stroke="#ef4444" stroke-width="2" stroke-dasharray="6,3"/>
  <text x="1175" y="155" font-family="Arial, sans-serif" font-size="10" fill="#ef4444">Feedback Loop</text>

  <line x1="1120" y1="175" x2="1160" y2="175" stroke="#3b82f6" stroke-width="2" stroke-dasharray="6,3"/>
  <text x="1175" y="180" font-family="Arial, sans-serif" font-size="10" fill="#3b82f6">User Preview</text>

  <rect x="1120" y="193" width="30" height="16" rx="3" fill="#dcfce7" stroke="#22c55e" stroke-width="1"/>
  <text x="1175" y="205" font-family="Arial, sans-serif" font-size="10" fill="#166534">New Feature</text>

  <rect x="1120" y="218" width="30" height="16" rx="3" fill="#fed7aa" stroke="#f97316" stroke-width="1"/>
  <text x="1175" y="230" font-family="Arial, sans-serif" font-size="10" fill="#ea580c">External Service</text>

  <rect x="1120" y="243" width="30" height="16" rx="3" fill="#e9d5ff" stroke="#8b5cf6" stroke-width="1"/>
  <text x="1175" y="255" font-family="Arial, sans-serif" font-size="10" fill="#7c3aed">AI/ML Component</text>

  <!-- ==================== NEW FEATURES BOX ==================== -->

  <rect x="1100" y="290" width="280" height="260" rx="8" fill="#f0fdf4" stroke="#22c55e" stroke-width="2"/>
  <rect x="1100" y="290" width="280" height="30" rx="8" fill="#22c55e"/>
  <text x="1240" y="310" text-anchor="middle" font-family="Arial, sans-serif" font-size="13" font-weight="bold" fill="white">NEW FEATURES</text>

  <text x="1120" y="340" font-family="Arial, sans-serif" font-size="11" fill="#166534">1. Template Library</text>
  <text x="1120" y="360" font-family="Arial, sans-serif" font-size="11" fill="#166534">2. Pre-Commit Validation</text>
  <text x="1120" y="380" font-family="Arial, sans-serif" font-size="11" fill="#166534">3. Security Scanning (Trivy)</text>
  <text x="1120" y="400" font-family="Arial, sans-serif" font-size="11" fill="#166534">4. Dry Run Preview Mode</text>
  <text x="1120" y="420" font-family="Arial, sans-serif" font-size="11" fill="#166534">5. Merge Request Workflow</text>
  <text x="1120" y="440" font-family="Arial, sans-serif" font-size="11" fill="#166534">6. Rollback Manager</text>
  <text x="1120" y="460" font-family="Arial, sans-serif" font-size="11" fill="#166534">7. Auto Pipeline Monitor</text>
  <text x="1120" y="480" font-family="Arial, sans-serif" font-size="11" fill="#166534">8. Analytics Dashboard</text>
  <text x="1120" y="500" font-family="Arial, sans-serif" font-size="11" fill="#166534">9. K8s/Helm Generation</text>
  <text x="1120" y="520" font-family="Arial, sans-serif" font-size="11" fill="#166534">10. Multi-Stage Pipeline</text>

  <!-- ==================== PORTS BOX ==================== -->

  <rect x="1100" y="570" width="280" height="150" rx="8" fill="white" stroke="#e2e8f0" stroke-width="1"/>
  <text x="1240" y="595" text-anchor="middle" font-family="Arial, sans-serif" font-size="13" font-weight="bold" fill="#334155">Service Ports</text>
  <line x1="1110" y1="605" x2="1370" y2="605" stroke="#e2e8f0" stroke-width="1"/>

  <text x="1120" y="625" font-family="Arial, sans-serif" font-size="10" fill="#475569">Open-WebUI: 3001</text>
  <text x="1120" y="643" font-family="Arial, sans-serif" font-size="10" fill="#475569">DevOps Backend: 8003</text>
  <text x="1120" y="661" font-family="Arial, sans-serif" font-size="10" fill="#475569">GitLab: 8929</text>
  <text x="1120" y="679" font-family="Arial, sans-serif" font-size="10" fill="#475569">Ollama: 11434</text>
  <text x="1120" y="697" font-family="Arial, sans-serif" font-size="10" fill="#475569">ChromaDB: 8000</text>

  <text x="1260" y="625" font-family="Arial, sans-serif" font-size="10" fill="#475569">SonarQube: 9002</text>
  <text x="1260" y="643" font-family="Arial, sans-serif" font-size="10" fill="#475569">Trivy: 8083</text>
  <text x="1260" y="661" font-family="Arial, sans-serif" font-size="10" fill="#475569">Nexus: 8081</text>
  <text x="1260" y="679" font-family="Arial, sans-serif" font-size="10" fill="#475569">Grafana: 3000</text>
  <text x="1260" y="697" font-family="Arial, sans-serif" font-size="10" fill="#475569">Prometheus: 9090</text>
</svg>
