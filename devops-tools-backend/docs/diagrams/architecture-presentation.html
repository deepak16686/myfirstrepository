<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DevOps Tools Backend - Architecture Overview</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary: #667eea;
            --secondary: #764ba2;
            --accent: #f093fb;
            --dark: #1a1a2e;
            --light: #eef2f7;
            --success: #10b981;
            --warning: #f59e0b;
            --danger: #ef4444;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, var(--dark) 0%, #16213e 100%);
            color: white;
            overflow: hidden;
            height: 100vh;
        }

        .presentation {
            height: 100vh;
            width: 100vw;
            position: relative;
        }

        .slide {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: none;
            padding: 40px 60px;
            opacity: 0;
            transition: opacity 0.5s ease;
            overflow-y: auto;
        }

        .slide.active {
            display: flex;
            flex-direction: column;
            opacity: 1;
        }

        /* Title Slide */
        .title-slide {
            justify-content: center;
            align-items: center;
            text-align: center;
            background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
        }

        .title-slide h1 {
            font-size: 4rem;
            margin-bottom: 20px;
            text-shadow: 2px 2px 10px rgba(0,0,0,0.3);
        }

        .title-slide h2 {
            font-size: 2rem;
            font-weight: 300;
            opacity: 0.9;
            margin-bottom: 40px;
        }

        .title-slide .subtitle {
            font-size: 1.2rem;
            opacity: 0.8;
            max-width: 600px;
        }

        .logo-icon {
            font-size: 6rem;
            margin-bottom: 30px;
        }

        /* Content Slides */
        .content-slide h2 {
            font-size: 2.5rem;
            margin-bottom: 30px;
            background: linear-gradient(90deg, var(--primary), var(--accent));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .content-slide h3 {
            font-size: 1.5rem;
            margin: 20px 0 15px 0;
            color: var(--accent);
        }

        /* Diagram Container */
        .diagram-container {
            flex: 1;
            display: flex;
            justify-content: center;
            align-items: center;
            background: white;
            border-radius: 15px;
            margin: 20px 0;
            padding: 20px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.3);
            overflow: hidden;
        }

        .diagram-container img,
        .diagram-container object {
            max-width: 100%;
            max-height: 100%;
            object-fit: contain;
        }

        /* Info Cards */
        .info-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .info-card {
            background: rgba(255,255,255,0.1);
            border-radius: 15px;
            padding: 25px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255,255,255,0.1);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }

        .info-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(102, 126, 234, 0.3);
        }

        .info-card h4 {
            color: var(--accent);
            margin-bottom: 10px;
            font-size: 1.2rem;
        }

        .info-card p {
            opacity: 0.9;
            line-height: 1.6;
        }

        .info-card .icon {
            font-size: 2.5rem;
            margin-bottom: 15px;
        }

        /* Lists */
        ul {
            list-style: none;
            padding-left: 0;
        }

        ul li {
            padding: 10px 0;
            padding-left: 30px;
            position: relative;
            line-height: 1.6;
        }

        ul li::before {
            content: "‚ñ∏";
            position: absolute;
            left: 0;
            color: var(--accent);
            font-weight: bold;
        }

        /* Tables */
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            background: rgba(255,255,255,0.05);
            border-radius: 10px;
            overflow: hidden;
        }

        th, td {
            padding: 15px 20px;
            text-align: left;
            border-bottom: 1px solid rgba(255,255,255,0.1);
        }

        th {
            background: linear-gradient(90deg, var(--primary), var(--secondary));
            font-weight: 600;
        }

        tr:hover {
            background: rgba(255,255,255,0.05);
        }

        /* Navigation */
        .nav-controls {
            position: fixed;
            bottom: 30px;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            gap: 20px;
            z-index: 1000;
        }

        .nav-btn {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            border: none;
            color: white;
            padding: 15px 30px;
            border-radius: 50px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: 600;
            transition: all 0.3s ease;
            box-shadow: 0 5px 20px rgba(102, 126, 234, 0.4);
        }

        .nav-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 8px 30px rgba(102, 126, 234, 0.6);
        }

        .nav-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }

        /* Progress Bar */
        .progress-bar {
            position: fixed;
            top: 0;
            left: 0;
            height: 4px;
            background: linear-gradient(90deg, var(--primary), var(--accent));
            transition: width 0.3s ease;
            z-index: 1000;
        }

        /* Slide Counter */
        .slide-counter {
            position: fixed;
            bottom: 30px;
            right: 40px;
            font-size: 1rem;
            opacity: 0.7;
        }

        /* Table of Contents */
        .toc-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
            margin-top: 30px;
        }

        .toc-item {
            background: rgba(255,255,255,0.1);
            border-radius: 10px;
            padding: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
        }

        .toc-item:hover {
            background: rgba(102, 126, 234, 0.3);
            transform: scale(1.02);
        }

        .toc-item .num {
            font-size: 2rem;
            font-weight: bold;
            color: var(--accent);
            margin-bottom: 10px;
        }

        /* Code Blocks */
        code {
            background: rgba(0,0,0,0.3);
            padding: 3px 8px;
            border-radius: 5px;
            font-family: 'Consolas', monospace;
            color: var(--accent);
        }

        pre {
            background: rgba(0,0,0,0.4);
            padding: 20px;
            border-radius: 10px;
            overflow-x: auto;
            margin: 15px 0;
        }

        pre code {
            background: none;
            padding: 0;
        }

        /* Two Column Layout */
        .two-col {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 40px;
            flex: 1;
        }

        .col {
            display: flex;
            flex-direction: column;
        }

        /* Highlight Box */
        .highlight-box {
            background: linear-gradient(135deg, rgba(102, 126, 234, 0.2), rgba(240, 147, 251, 0.2));
            border-left: 4px solid var(--accent);
            padding: 20px;
            border-radius: 0 10px 10px 0;
            margin: 15px 0;
        }

        /* Architecture Flow */
        .flow-container {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 20px;
            flex-wrap: wrap;
            margin: 30px 0;
        }

        .flow-box {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            padding: 20px 30px;
            border-radius: 10px;
            text-align: center;
            min-width: 150px;
        }

        .flow-arrow {
            font-size: 2rem;
            color: var(--accent);
        }

        /* Scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
        }

        ::-webkit-scrollbar-track {
            background: rgba(255,255,255,0.1);
        }

        ::-webkit-scrollbar-thumb {
            background: var(--primary);
            border-radius: 4px;
        }

        /* Keyboard hint */
        .keyboard-hint {
            position: fixed;
            bottom: 90px;
            left: 50%;
            transform: translateX(-50%);
            font-size: 0.85rem;
            opacity: 0.5;
        }

        kbd {
            background: rgba(255,255,255,0.2);
            padding: 5px 10px;
            border-radius: 5px;
            margin: 0 5px;
        }
    </style>
</head>
<body>
    <div class="progress-bar" id="progressBar"></div>

    <div class="presentation" id="presentation">

        <!-- Slide 1: Title -->
        <div class="slide title-slide active" data-slide="1">
            <div class="logo-icon">üöÄ</div>
            <h1>DevOps Tools Backend</h1>
            <h2>Complete Architecture Overview</h2>
            <p class="subtitle">A comprehensive guide to understanding the AI-powered DevOps pipeline generation system with Open-WebUI integration</p>
        </div>

        <!-- Slide 2: Table of Contents -->
        <div class="slide content-slide" data-slide="2">
            <h2>üìã Table of Contents</h2>
            <div class="toc-grid">
                <div class="toc-item" onclick="goToSlide(3)">
                    <div class="num">01</div>
                    <div>System Overview</div>
                </div>
                <div class="toc-item" onclick="goToSlide(4)">
                    <div class="num">02</div>
                    <div>Basic Data Flow</div>
                </div>
                <div class="toc-item" onclick="goToSlide(5)">
                    <div class="num">03</div>
                    <div>Enhanced Pipeline Flow</div>
                </div>
                <div class="toc-item" onclick="goToSlide(6)">
                    <div class="num">04</div>
                    <div>Tool Integration</div>
                </div>
                <div class="toc-item" onclick="goToSlide(7)">
                    <div class="num">05</div>
                    <div>Secrets & Configuration</div>
                </div>
                <div class="toc-item" onclick="goToSlide(8)">
                    <div class="num">06</div>
                    <div>Open-WebUI Architecture</div>
                </div>
                <div class="toc-item" onclick="goToSlide(9)">
                    <div class="num">07</div>
                    <div>Custom Frontend Design</div>
                </div>
                <div class="toc-item" onclick="goToSlide(10)">
                    <div class="num">08</div>
                    <div>API Endpoints</div>
                </div>
                <div class="toc-item" onclick="goToSlide(11)">
                    <div class="num">09</div>
                    <div>Database Schema</div>
                </div>
            </div>
        </div>

        <!-- Slide 3: System Overview -->
        <div class="slide content-slide" data-slide="3">
            <h2>üèóÔ∏è System Overview</h2>
            <div class="info-grid">
                <div class="info-card">
                    <div class="icon">üåê</div>
                    <h4>Open-WebUI (Port 3001)</h4>
                    <p>AI chat interface for user interaction. Manages models, tools, prompts, and documents. Built with SvelteKit + FastAPI.</p>
                </div>
                <div class="info-card">
                    <div class="icon">‚öôÔ∏è</div>
                    <h4>DevOps Backend (Port 8003)</h4>
                    <p>FastAPI backend exposing 71+ endpoints for GitLab, SonarQube, Trivy, Nexus integrations. Unified tool calling API.</p>
                </div>
                <div class="info-card">
                    <div class="icon">ü¶ä</div>
                    <h4>GitLab (Port 8929)</h4>
                    <p>Source code management, CI/CD pipelines, merge requests, container registry. Central DevOps hub.</p>
                </div>
                <div class="info-card">
                    <div class="icon">üîç</div>
                    <h4>SonarQube (Port 9002)</h4>
                    <p>Code quality analysis, security vulnerabilities, code smells detection, quality gates.</p>
                </div>
                <div class="info-card">
                    <div class="icon">üõ°Ô∏è</div>
                    <h4>Trivy (Port 8083)</h4>
                    <p>Container image vulnerability scanning, SBOM generation, security reports.</p>
                </div>
                <div class="info-card">
                    <div class="icon">üì¶</div>
                    <h4>Nexus (Port 8081)</h4>
                    <p>Artifact repository manager for Docker images, npm packages, Maven artifacts.</p>
                </div>
                <div class="info-card">
                    <div class="icon">ü§ñ</div>
                    <h4>Ollama (Port 11434)</h4>
                    <p>Local LLM runtime hosting models like Llama, Mistral. Processes AI requests for pipeline generation.</p>
                </div>
                <div class="info-card">
                    <div class="icon">üóÑÔ∏è</div>
                    <h4>ChromaDB (Port 8000)</h4>
                    <p>Vector database for RAG. Stores document embeddings for context-aware AI responses.</p>
                </div>
            </div>
        </div>

        <!-- Slide 4: Basic Data Flow -->
        <div class="slide content-slide" data-slide="4">
            <h2>üìä Basic Data Flow</h2>
            <p>How pipeline generation works from user request to deployment</p>
            <div class="diagram-container">
                <object type="image/svg+xml" data="data-flow.svg" style="width: 100%; height: auto;">
                    <img src="data-flow.svg" alt="Data Flow Diagram">
                </object>
            </div>
            <div class="highlight-box">
                <strong>Flow Summary:</strong> User ‚Üí Open-WebUI ‚Üí AI Model ‚Üí Tool Calls ‚Üí Backend API ‚Üí GitLab/Services ‚Üí Response
            </div>
        </div>

        <!-- Slide 5: Enhanced Pipeline Flow -->
        <div class="slide content-slide" data-slide="5">
            <h2>üöÄ Enhanced Pipeline Flow</h2>
            <p>Comprehensive 6-phase pipeline generation with validation, security, and monitoring</p>
            <div class="diagram-container">
                <object type="image/svg+xml" data="data-flow-enhanced.svg" style="width: 100%; height: auto;">
                    <img src="data-flow-enhanced.svg" alt="Enhanced Data Flow">
                </object>
            </div>
            <div class="info-grid" style="margin-top: 20px;">
                <div class="info-card">
                    <h4>Key Improvements</h4>
                    <ul>
                        <li>Template Library for reusable pipelines</li>
                        <li>Pre-commit validation before push</li>
                        <li>Security scanning integration</li>
                        <li>Dry-run preview mode</li>
                        <li>Auto rollback on failures</li>
                    </ul>
                </div>
                <div class="info-card">
                    <h4>6 Phases</h4>
                    <ul>
                        <li><strong>INPUT:</strong> User requirements capture</li>
                        <li><strong>ANALYZE:</strong> Project detection & templates</li>
                        <li><strong>GENERATE:</strong> AI pipeline creation</li>
                        <li><strong>VALIDATE:</strong> Security & syntax checks</li>
                        <li><strong>DEPLOY:</strong> MR workflow & approvals</li>
                        <li><strong>MONITOR:</strong> Execution tracking</li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- Slide 6: Tool Integration -->
        <div class="slide content-slide" data-slide="6">
            <h2>üîß Tool Integration Architecture</h2>
            <p>How tools connect, what inputs they take, and what outputs they produce</p>
            <div class="diagram-container">
                <object type="image/svg+xml" data="tool-integration.svg" style="width: 100%; height: auto;">
                    <img src="tool-integration.svg" alt="Tool Integration">
                </object>
            </div>
            <div class="highlight-box">
                <strong>Unified Tool Caller:</strong> Single API endpoint <code>POST /api/v1/call</code> that routes to 62+ tool actions across all services
            </div>
        </div>

        <!-- Slide 7: Secrets & Configuration -->
        <div class="slide content-slide" data-slide="7">
            <h2>üîê Secrets & Configuration</h2>
            <p>All credentials, tokens, and connection details with explanations</p>
            <div class="diagram-container">
                <object type="image/svg+xml" data="secrets-configuration.svg" style="width: 100%; height: auto;">
                    <img src="secrets-configuration.svg" alt="Secrets Configuration">
                </object>
            </div>
            <table style="margin-top: 20px; font-size: 0.9rem;">
                <tr>
                    <th>Service</th>
                    <th>Port</th>
                    <th>Auth Type</th>
                    <th>Purpose</th>
                </tr>
                <tr>
                    <td>GitLab</td>
                    <td>8929</td>
                    <td>Private Token</td>
                    <td>API access for repos, pipelines, MRs</td>
                </tr>
                <tr>
                    <td>SonarQube</td>
                    <td>9002</td>
                    <td>User Token</td>
                    <td>Code quality analysis API</td>
                </tr>
                <tr>
                    <td>Trivy</td>
                    <td>8083</td>
                    <td>None</td>
                    <td>Local vulnerability scanning</td>
                </tr>
                <tr>
                    <td>Nexus</td>
                    <td>8081</td>
                    <td>Basic Auth</td>
                    <td>Artifact repository access</td>
                </tr>
            </table>
        </div>

        <!-- Slide 8: Open-WebUI Architecture -->
        <div class="slide content-slide" data-slide="8">
            <h2>üñ•Ô∏è Open-WebUI Architecture</h2>
            <p>How prompts, documents, and tools are stored and provided to models</p>
            <div class="diagram-container">
                <object type="image/svg+xml" data="openwebui-architecture.svg" style="width: 100%; height: auto;">
                    <img src="openwebui-architecture.svg" alt="Open-WebUI Architecture">
                </object>
            </div>
            <div class="two-col" style="margin-top: 20px;">
                <div class="info-card">
                    <h4>SQLite Database (webui.db)</h4>
                    <ul>
                        <li><code>model</code> - Custom model configs</li>
                        <li><code>tool</code> - Python tool definitions</li>
                        <li><code>prompt</code> - Saved prompts</li>
                        <li><code>document</code> - Uploaded docs</li>
                        <li><code>knowledge</code> - Knowledge bases</li>
                    </ul>
                </div>
                <div class="info-card">
                    <h4>Model Selection Flow</h4>
                    <ul>
                        <li>Load <code>model.params.system</code> prompt</li>
                        <li>Load <code>model.meta.toolIds[]</code> tools</li>
                        <li>Inject into LLM context</li>
                        <li>Execute tool calls via Python</li>
                        <li>Return results to conversation</li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- Slide 9: Custom Frontend Design -->
        <div class="slide content-slide" data-slide="9">
            <h2>üé® Custom Frontend Architecture</h2>
            <p>Proposed design for separate frontend application with PostgreSQL</p>
            <div class="diagram-container">
                <object type="image/svg+xml" data="custom-frontend-architecture.svg" style="width: 100%; height: auto;">
                    <img src="custom-frontend-architecture.svg" alt="Custom Frontend Architecture">
                </object>
            </div>
            <div class="highlight-box">
                <strong>Key Changes:</strong> PostgreSQL instead of SQLite | Proper relational schema | Direct Ollama integration | Custom API layer | Independent deployment
            </div>
        </div>

        <!-- Slide 10: API Endpoints -->
        <div class="slide content-slide" data-slide="10">
            <h2>üîå API Endpoints Overview</h2>
            <p>71+ endpoints across 7 routers - Access via <a href="http://localhost:8003/docs" style="color: var(--accent);">Swagger UI</a></p>
            <div class="two-col">
                <div class="col">
                    <table>
                        <tr><th>Router</th><th>Endpoints</th><th>Purpose</th></tr>
                        <tr><td>/api/v1/gitlab</td><td>25+</td><td>Projects, branches, pipelines, MRs</td></tr>
                        <tr><td>/api/v1/sonarqube</td><td>15+</td><td>Analysis, metrics, quality gates</td></tr>
                        <tr><td>/api/v1/trivy</td><td>5+</td><td>Image scanning, SBOM</td></tr>
                        <tr><td>/api/v1/nexus</td><td>10+</td><td>Repos, components, assets</td></tr>
                    </table>
                </div>
                <div class="col">
                    <table>
                        <tr><th>Router</th><th>Endpoints</th><th>Purpose</th></tr>
                        <tr><td>/api/v1/pipeline</td><td>5+</td><td>Generate, validate, templates</td></tr>
                        <tr><td>/api/v1/tools</td><td>5+</td><td>List, execute, unified</td></tr>
                        <tr><td>/api/v1/call</td><td>1</td><td>Unified tool caller</td></tr>
                        <tr><td>/health</td><td>1</td><td>Health check</td></tr>
                    </table>
                </div>
            </div>
            <div class="highlight-box" style="margin-top: 30px;">
                <h4>Unified Tool Caller Example</h4>
                <pre><code>POST /api/v1/call
{
  "tool": "gitlab",
  "action": "list_projects",
  "parameters": { "search": "devops" }
}</code></pre>
            </div>
        </div>

        <!-- Slide 11: Database Schema -->
        <div class="slide content-slide" data-slide="11">
            <h2>üóÑÔ∏è Database Schema Comparison</h2>
            <div class="two-col">
                <div class="col">
                    <h3>Open-WebUI (SQLite)</h3>
                    <div class="info-card">
                        <p><strong>30 tables</strong> in webui.db</p>
                        <ul style="font-size: 0.9rem;">
                            <li><code>user</code> - User accounts</li>
                            <li><code>chat</code> - Conversations (JSON)</li>
                            <li><code>model</code> - Model configs (JSON)</li>
                            <li><code>tool</code> - Python tools</li>
                            <li><code>prompt</code> - Saved prompts</li>
                            <li><code>document</code> - Uploaded docs</li>
                            <li><code>knowledge</code> - Knowledge bases</li>
                            <li><code>file</code> - File metadata</li>
                            <li><code>memory</code> - User memories</li>
                            <li><code>config</code> - App settings</li>
                        </ul>
                    </div>
                </div>
                <div class="col">
                    <h3>Custom Frontend (PostgreSQL)</h3>
                    <div class="info-card">
                        <p><strong>Proposed relational design</strong></p>
                        <ul style="font-size: 0.9rem;">
                            <li><code>users</code> - Proper user table</li>
                            <li><code>conversations</code> - Chat sessions</li>
                            <li><code>messages</code> - Individual messages</li>
                            <li><code>models</code> - Model definitions</li>
                            <li><code>model_tools</code> - M:N junction</li>
                            <li><code>tools</code> - Tool definitions</li>
                            <li><code>prompts</code> - System prompts</li>
                            <li><code>documents</code> - Doc metadata</li>
                            <li><code>embeddings</code> - Vector refs</li>
                            <li><code>audit_logs</code> - Activity tracking</li>
                        </ul>
                    </div>
                </div>
            </div>
            <div class="highlight-box" style="margin-top: 20px;">
                <strong>Why PostgreSQL?</strong> Better relational integrity, JSON support, scalability, concurrent access, and enterprise features
            </div>
        </div>

        <!-- Slide 12: Tool Execution Flow -->
        <div class="slide content-slide" data-slide="12">
            <h2>‚ö° Tool Execution Flow</h2>
            <p>Step-by-step process when AI calls a DevOps tool</p>
            <div class="flow-container">
                <div class="flow-box">1Ô∏è‚É£ User<br>Message</div>
                <span class="flow-arrow">‚Üí</span>
                <div class="flow-box">2Ô∏è‚É£ LLM<br>Processing</div>
                <span class="flow-arrow">‚Üí</span>
                <div class="flow-box">3Ô∏è‚É£ Tool Call<br>Decision</div>
                <span class="flow-arrow">‚Üí</span>
                <div class="flow-box">4Ô∏è‚É£ Execute<br>Python</div>
                <span class="flow-arrow">‚Üí</span>
                <div class="flow-box">5Ô∏è‚É£ API<br>Request</div>
            </div>
            <div class="flow-container">
                <div class="flow-box">6Ô∏è‚É£ Backend<br>Routes</div>
                <span class="flow-arrow">‚Üí</span>
                <div class="flow-box">7Ô∏è‚É£ Service<br>Call</div>
                <span class="flow-arrow">‚Üí</span>
                <div class="flow-box">8Ô∏è‚É£ Response<br>Data</div>
                <span class="flow-arrow">‚Üí</span>
                <div class="flow-box">9Ô∏è‚É£ LLM<br>Format</div>
                <span class="flow-arrow">‚Üí</span>
                <div class="flow-box">üîü User<br>Output</div>
            </div>
            <div class="info-grid" style="margin-top: 30px;">
                <div class="info-card">
                    <h4>Example: Create Pipeline</h4>
                    <pre style="font-size: 0.8rem;"><code>User: "Create CI pipeline for Python project"
‚Üì
LLM: tool_call("devops_create_pipeline", {...})
‚Üì
Tool: POST http://localhost:8003/api/v1/pipeline/generate
‚Üì
Backend: Analyzes project, generates YAML
‚Üì
Response: .gitlab-ci.yml content
‚Üì
LLM: "Here's your pipeline configuration..."</code></pre>
                </div>
                <div class="info-card">
                    <h4>Example: Scan Image</h4>
                    <pre style="font-size: 0.8rem;"><code>User: "Scan nginx:latest for vulnerabilities"
‚Üì
LLM: tool_call("devops_trivy_scan", {...})
‚Üì
Tool: POST http://localhost:8003/api/v1/trivy/scan
‚Üì
Backend: Calls Trivy server at :8083
‚Üì
Response: Vulnerability report JSON
‚Üì
LLM: "Found 5 critical, 12 high..."</code></pre>
                </div>
            </div>
        </div>

        <!-- Slide 13: Architecture Layers -->
        <div class="slide content-slide" data-slide="13">
            <h2>üèõÔ∏è Architecture Layers</h2>
            <div class="info-grid">
                <div class="info-card" style="border-left: 4px solid #10b981;">
                    <h4>üé® Presentation Layer</h4>
                    <ul>
                        <li>Open-WebUI (SvelteKit)</li>
                        <li>Custom Frontend (React/Vue)</li>
                        <li>Swagger UI</li>
                    </ul>
                </div>
                <div class="info-card" style="border-left: 4px solid #3b82f6;">
                    <h4>üîå API Gateway Layer</h4>
                    <ul>
                        <li>FastAPI Backend</li>
                        <li>Open-WebUI Backend</li>
                        <li>Authentication/CORS</li>
                    </ul>
                </div>
                <div class="info-card" style="border-left: 4px solid #8b5cf6;">
                    <h4>üß† Intelligence Layer</h4>
                    <ul>
                        <li>Ollama LLM Runtime</li>
                        <li>ChromaDB Embeddings</li>
                        <li>Tool Orchestration</li>
                    </ul>
                </div>
                <div class="info-card" style="border-left: 4px solid #f59e0b;">
                    <h4>‚öôÔ∏è Service Layer</h4>
                    <ul>
                        <li>GitLab CI/CD</li>
                        <li>SonarQube Analysis</li>
                        <li>Trivy Scanning</li>
                        <li>Nexus Repository</li>
                    </ul>
                </div>
                <div class="info-card" style="border-left: 4px solid #ef4444;">
                    <h4>üíæ Data Layer</h4>
                    <ul>
                        <li>SQLite (Open-WebUI)</li>
                        <li>PostgreSQL (GitLab)</li>
                        <li>Vector Store (ChromaDB)</li>
                    </ul>
                </div>
                <div class="info-card" style="border-left: 4px solid #6b7280;">
                    <h4>üê≥ Infrastructure Layer</h4>
                    <ul>
                        <li>Docker Containers</li>
                        <li>Docker Compose</li>
                        <li>Volume Mounts</li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- Slide 14: Summary -->
        <div class="slide content-slide" data-slide="14">
            <h2>üìù Summary & Next Steps</h2>
            <div class="two-col">
                <div class="col">
                    <h3>What We Covered</h3>
                    <div class="info-card">
                        <ul>
                            <li>Complete system architecture</li>
                            <li>Data flow for pipeline generation</li>
                            <li>Tool integration patterns</li>
                            <li>Secrets and configuration</li>
                            <li>Open-WebUI internals</li>
                            <li>Custom frontend design</li>
                            <li>API endpoints structure</li>
                            <li>Database schemas</li>
                        </ul>
                    </div>
                </div>
                <div class="col">
                    <h3>Potential Next Steps</h3>
                    <div class="info-card">
                        <ul>
                            <li>Implement custom frontend</li>
                            <li>Add template library feature</li>
                            <li>Integrate security scanning</li>
                            <li>Build analytics dashboard</li>
                            <li>Add rollback capabilities</li>
                            <li>Implement dry-run preview</li>
                            <li>Create MR approval workflow</li>
                            <li>Set up monitoring/alerting</li>
                        </ul>
                    </div>
                </div>
            </div>
            <div class="highlight-box" style="margin-top: 30px; text-align: center;">
                <h3>üéØ Key Insight</h3>
                <p>The architecture is modular and extensible. Each component can be replaced or enhanced independently. Start with understanding the data flow, then customize based on requirements.</p>
            </div>
        </div>

        <!-- Slide 15: Thank You -->
        <div class="slide title-slide" data-slide="15" style="background: linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, var(--primary) 100%);">
            <div class="logo-icon">‚ú®</div>
            <h1>Thank You!</h1>
            <h2>DevOps Tools Backend Architecture</h2>
            <p class="subtitle" style="margin-top: 40px;">
                All diagrams available in:<br>
                <code style="font-size: 1.1rem;">devops-tools-backend/docs/diagrams/</code>
            </p>
            <div style="margin-top: 50px; opacity: 0.7;">
                <p>Swagger UI: <a href="http://localhost:8003/docs" style="color: var(--accent);">localhost:8003/docs</a></p>
                <p>Open-WebUI: <a href="http://localhost:3001" style="color: var(--accent);">localhost:3001</a></p>
            </div>
        </div>

    </div>

    <div class="nav-controls">
        <button class="nav-btn" id="prevBtn" onclick="changeSlide(-1)">‚Üê Previous</button>
        <button class="nav-btn" id="nextBtn" onclick="changeSlide(1)">Next ‚Üí</button>
    </div>

    <div class="slide-counter" id="slideCounter">1 / 15</div>

    <div class="keyboard-hint">
        Use <kbd>‚Üê</kbd> <kbd>‚Üí</kbd> arrow keys or <kbd>Space</kbd> to navigate
    </div>

    <script>
        let currentSlide = 1;
        const totalSlides = 15;

        function showSlide(n) {
            const slides = document.querySelectorAll('.slide');

            if (n > totalSlides) currentSlide = 1;
            if (n < 1) currentSlide = totalSlides;

            slides.forEach(slide => slide.classList.remove('active'));
            slides[currentSlide - 1].classList.add('active');

            // Update progress bar
            const progress = (currentSlide / totalSlides) * 100;
            document.getElementById('progressBar').style.width = progress + '%';

            // Update counter
            document.getElementById('slideCounter').textContent = currentSlide + ' / ' + totalSlides;

            // Update buttons
            document.getElementById('prevBtn').disabled = currentSlide === 1;
            document.getElementById('nextBtn').disabled = currentSlide === totalSlides;
        }

        function changeSlide(direction) {
            currentSlide += direction;
            showSlide(currentSlide);
        }

        function goToSlide(n) {
            currentSlide = n;
            showSlide(currentSlide);
        }

        // Keyboard navigation
        document.addEventListener('keydown', function(e) {
            if (e.key === 'ArrowRight' || e.key === ' ') {
                e.preventDefault();
                changeSlide(1);
            } else if (e.key === 'ArrowLeft') {
                e.preventDefault();
                changeSlide(-1);
            } else if (e.key === 'Home') {
                e.preventDefault();
                goToSlide(1);
            } else if (e.key === 'End') {
                e.preventDefault();
                goToSlide(totalSlides);
            }
        });

        // Touch support for mobile
        let touchStartX = 0;
        let touchEndX = 0;

        document.addEventListener('touchstart', e => {
            touchStartX = e.changedTouches[0].screenX;
        });

        document.addEventListener('touchend', e => {
            touchEndX = e.changedTouches[0].screenX;
            if (touchStartX - touchEndX > 50) {
                changeSlide(1); // Swipe left
            } else if (touchEndX - touchStartX > 50) {
                changeSlide(-1); // Swipe right
            }
        });

        // Initialize
        showSlide(currentSlide);
    </script>
</body>
</html>
